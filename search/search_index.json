{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u6b22\u8fce\u6765\u5230 Cyrus0w \u7684\u535a\u5ba2 \u00b6","title":"\u4e3b\u9875"},{"location":"#cyrus0w","text":"","title":"\u6b22\u8fce\u6765\u5230 Cyrus0w \u7684\u535a\u5ba2"},{"location":"FAQ/","text":"\u5947\u745e\u8fd0\u7ef4FAQ \u00b6 \u5947\u745e\u8fd0\u7ef4FAQ \u96c6\u7fa4\u603b\u89c8 \u4e00\u3001\u663e\u793a\u8282\u70b9\u6253\u4e0d\u5f00\u684c\u9762\u5e94\u7528 \u4e8c\u3001\u4f5c\u4e1a\u76ee\u5f55\u62a5stale file handle\u9519\u8bef \u4e09\u3001\u4f5c\u4e1a\u5904\u4e8e\u4e00\u76f4\u6392\u961f\u6216wait\u72b6\u6001\u5982\u4f55\u5904\u7406\uff1f \u56db\u3001\u96c6\u6210\u8f6f\u4ef6\uff08starccm\u3001VAOne\uff09\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\uff08license\u3001mpi\u8fd0\u884c\u73af\u5883\u7b49\uff09\u8bf4\u660e\u3002 \u8bbe\u7f6e\u4e3a\u8d70ib\u7f51\u7edc \u8bbe\u7f6e\u4e3a\u8d70\u666e\u901a\u7f51\u7edc \u4e94\u3001\u8d44\u6e90\u6c60\u6062\u590d\u548c\u5220\u9664 \u516d\u3001server\u8282\u70b9df -h\u5361\u4f4f \u4e03\u3001\u4f5c\u4e1a\u63d0\u4ea4\u5931\u8d25 \u516b\u3001\u63d0\u4ea4\u4f5c\u4e1a\u811a\u672c \u4e5d\u3001\u66ff\u6362altair\u7684license \u5341\u3001\u96c6\u6210\u8f6f\u4ef6\uff08\u4fee\u6539\u914d\u7f6e\uff09 \u5341\u4e00\u3001web\u9875\u9762\u65e0\u6cd5\u63d0\u4ea4\u4f5c\u4e1a\u6216\u63d0\u4ea4\u4f5c\u4e1a\u63d0\u793aUnknown.zac(Unknown Source)\u7b49\u9519\u8bef \u5341\u4e8c\u3001nastran-smp\u4f5c\u4e1a\u65e0\u6cd5\u8ba1\u7b97\u6210\u529f\uff0c\u4e00\u76f4\u5904\u4e8e\u8ba1\u7b97\u4e2d \u5c06\u622a\u56fe\u6240\u793a\u590432\u4fee\u6539\u621016\uff0c\u4fee\u6539\u5b8c\u65e0\u9700\u91cd\u542f\u670d\u52a1\uff0c\u91cd\u65b0\u63d0\u4ea4\u4f5c\u4e1a\u5373\u53ef \u5341\u4e09\u3001altair\u8f6f\u4ef6\u5b89\u88c5 \u5341\u56db\u3001dyna license\u66ff\u6362 \u5341\u4e94\u3001\u4f5c\u4e1a\u8ba1\u7b97\u6162\u6392\u67e5 \u5341\u516d\u3001\u65e7\u6570\u636e\u6e05\u7406 \u5341\u4e03\u3001\u66f4\u6539\u5e94\u7528\u63d0\u4ea4\u4f5c\u4e1a\u7684\u6700\u5927\u8fd0\u884c\u65f6\u957f \u5341\u516b\u3001\u67e5\u770b\u4f5c\u4e1a\u8f93\u51fa\u65e5\u5fd7 \u5341\u4e5d\u3001caelnse1\u4e0apbs\u65e0\u6cd5\u91cd\u542f \u4e8c\u5341\u3001\u68c0\u67e5ib\u4ea4\u6362\u673a\u7aef\u53e3 \u4e8c\u5341\u4e00\u3001\u5907\u4efd\u5173\u952e\u76ee\u5f55\u548c\u6587\u4ef6 \u4e8c\u5341\u4e8c\u3001\u961f\u5217\u8bbe\u7f6e \u4e8c\u5341\u4e09\u3001\u8f66\u578b\u96c6\u6210 \u4ee5\u4e0b\u914d\u7f6e\u8868\u793a\u5f53\u9009\u62e9\u7a7a\u884c\u6216T21\u8f66\u578b\u65f6\uff0c\u5c06\u65e0\u6cd5\u63d0\u4ea4\uff0c\u5728web\u4e0a\u4f1a\u62a5\u9519 \u4e8c\u5341\u56db\u3001\u8c03\u6574\u4f5c\u4e1a\u4f18\u5148\u7ea7 \u5e38\u7528\u547d\u4ee4\u53ca\u8def\u5f84 \u96c6\u7fa4\u603b\u89c8 \u00b6 \u60e0\u666e\u7ba1\u7406\u8282\u70b9\uff1aCAELNSE1\\2 \uff08\u7528\u7684\u60e0\u666eCMU\u8fdb\u884c\u7cfb\u7edf\u5206\u53d1\uff0c\u514b\u9686\uff09 \u8ba1\u7b97\u8282\u70b9\uff1aCAEOPE01-82 GPFS server\uff1aCAESNS01\\02 PBS pro + PBS WORKS\uff1aCAELNSE1 \u524d\u540e\u5904\u7406\u8282\u70b9\uff08\u663e\u793a\u8282\u70b9\uff09\uff1aCAEGNS01\u300102\u300103\u300104\u300105\u300106\u300107 \u7528\u6237\u7ba1\u7406NIS server\uff1aCAELNSE1 \u5176\u4ed6\u8bf4\u660e\uff1a\u6240\u6709\u8282\u70b9\u914d\u7f6e\u4e86nfs + autofs\uff08\u7ba1\u7406\u8282\u70b9\u4f1a\u6302\u8f7d\u6240\u6709\u8282\u70b9\uff0c\u8ba1\u7b97\u8282\u70b9\u4f1a\u6839\u636e\u4f5c\u4e1a\u8c03\u5ea6\u5230\u54ea\u51e0\u53f0\uff0c\u5728\u54ea\u51e0\u53f0\u8fdb\u884c\u76f8\u5e94\u8282\u70b9\u7684\u6302\u8f7d\uff09 /etc/exports /etc/auto.master /etc/auto.pbs \u4e00\u3001\u663e\u793a\u8282\u70b9\u6253\u4e0d\u5f00\u684c\u9762\u5e94\u7528 \u00b6 \u73b0\u8c61 \uff1a \u6253\u5f00\u56fe\u5f62\uff0c\u65e0\u6cd5\u8fdb\u5165\u56fe\u5f62\u684c\u9762\uff0c\u5e76\u81ea\u52a8\u52a0\u8f7d\u5e94\u7528 \u6392\u67e5\uff1a 1.\u901a\u8fc7\u9875\u9762Altair Compute Manager\u767b\u5f55pbsadmin/1qaz2wsx\uff0c\u63d0\u4ea4\u4e00\u4e2a\u56fe\u5f62\u4f5c\u4e1a 2.\u8fdb\u5165\u76d1\u63a7\uff0c\u9009\u4e2d\u63d0\u4ea4\u7684\u4f5c\u4e1a\uff0c\u70b9\u51fb\u56fe\u5f62\uff0c\u67e5\u770b\u4e0b\u65b9\u7684\u8ba1\u7b97\u8282\u70b9 3.\u547d\u4ee4\u884csu - pbsadmin\uff0c\u5e76ssh\u5230\u4e0a\u9762\u7684\u8ba1\u7b97\u8282\u70b9\uff0c\u672c\u6b21\u6848\u4f8b\u4e2d\u4f1a\u51fa\u73b0\u6b64\u8fc7\u7a0b\u975e\u5e38\u7f13\u6162\uff0c\u8003\u8651\u662fgpfs\u5e76\u884c\u6587\u4ef6\u7cfb\u7edf\u5b58\u5728\u5f02\u5e38\u3002 4.\u5229\u7528\u547d\u4ee4mmfsadm dump waiter \u68c0\u67e5gpfs\u6587\u4ef6\u7cfb\u7edf\u5ef6\u8fdf\u60c5\u51b5\uff0c\u4ee5\u4e0b\u662f\u622a\u56fe\u8be6\u89e3 5.\u8054\u7cfb\u7528\u6237\u5c1d\u8bd5\u91cd\u542f\u5ef6\u8fdf\u7684\u8282\u70b9\uff0c\u91cd\u542f\u540e\u68c0\u67e5\u3002\u672c\u6848\u4f8b\u6700\u7ec8\u6392\u67e5\u5230gpfs server02\u8282\u70b9\u5ef6\u8fdf\u5f88\u5927\uff0c\u91cd\u542f\u540e\u8fd8\u662f\u5ef6\u8fdf\uff0c\u4f46\u684c\u9762\u53ef\u4ee5\u6253\u5f00\u4e86\uff0c\u8ba9\u5ba2\u6237\u8054\u7cfb\u5b58\u50a8\u786c\u4ef6\u5de5\u7a0b\u5e08\u68c0\u67e5\u4e00\u4e0b\u5b58\u50a8\u94fe\u8def\u662f\u5426\u6b63\u5e38\u3002 \u4e8c\u3001\u4f5c\u4e1a\u76ee\u5f55\u62a5stale file handle\u9519\u8bef \u00b6 \u62a5\u9519\u622a\u56fe\uff1a \u95ee\u9898\u5206\u6790\uff1a \u4ece\u62a5\u9519\u622a\u56fe\u53ef\u4ee5\u770b\u5230\u4f5c\u4e1a\u5230\u5171\u4eab\u76ee\u5f55\u51fa\u73b0\u9519\u8bef\uff0c\u51fa\u9519\u7684\u8282\u70b9\u5206\u522b\u4e3acaeope56\u3001caeope57\u3001caeope60\u3002\u8bf4\u660e\u5f53\u65f6\u8fd9\u4e09\u4e2a\u8282\u70b9gpfs\u6302\u8f7d\u51fa\u73b0\u95ee\u9898\uff0c\u6b64\u65f6\u53ef\u5148ssh\u5230\u4e09\u4e2a\u8282\u70b9\u4e0adf -h\u770b\u4e0b\u5b58\u50a8\u8fd8\u5728\u4e0d\u5728\uff0c\u518d\u5230CAESNS01\u8282\u70b9\u4e0a\u67e5\u770bgpfs\u65e5\u5fd7\uff0c\u6700\u540e\u5230\u5404\u95ee\u9898\u8282\u70b9\u4e0a\u770bgpfs\u65e5\u5fd7\uff0c\u7efc\u5408\u53cc\u65b9\u65e5\u5fd7\u8fdb\u884c\u5206\u6790\u3002 \u95ee\u9898\u89e3\u51b3\uff1a \u5148\u8bf4\u660e\u4e00\u4e0b\uff0cgpfs\u65e5\u5fd7\u4e3b\u8981\u5173\u6ce8\u4fe9\u4e2a\uff0c\u4e00\u4e2a\u662fgpfs\u91cd\u542f\u524d\u7684\u65e5\u5fd7\uff0c\u5373/var/adm/ras/mmfs.log.previous\uff0c\u4e00\u4e2a\u662fgpfs\u91cd\u542f\u540e\u7684\u65e5\u5fd7\uff0c\u5373/var/adm/ras/mmfs.log.latest\u3002\u8fd9\u91cc\u53ef\u4ee5\u5148\u5230CAESNS01\u8282\u70b9\u4e0a\u67e5\u770bgpfs\u65e5\u5fd7\uff0c\u7528\u547d\u4ee4cat /var/adm/ras/mmfs.log.latest |grep -i caeope60\uff0c\u5173\u6ce8\u95ee\u9898\u51fa\u73b0\u65f6\u95f4\u70b9\u548c\u5185\u5bb9\uff0c \u518dssh\u5230\u95ee\u9898\u8282\u70b9\uff0c\u901a\u8fc7gpfs\u65e5\u5fd7\u67e5\u5230gpfs\u91cd\u542f\u7684\u65f6\u95f4\u70b9\uff0c\u7136\u540e\u6839\u636e\u65f6\u95f4\u70b9\u518d\u53bb\u67e5Linux\u7cfb\u7edf\u5728\u90a3\u4e2a\u65f6\u95f4\u70b9\u662f\u4e0d\u662f\u6709\u95ee\u9898\uff0cLinux\u7cfb\u7edf\u65e5\u5fd7\u5728/var/log/messages\u3002\u672c\u6848\u4f8b\u6700\u7ec8\u67e5\u5230\u662f\u7528\u6237\u63d0\u4ea4\u7684\u4f5c\u4e1a\u6a21\u578b\u8fc7\u5927\u9020\u6210\u5185\u5b58\u6ea2\u51fa\u5bfc\u81f4gpfs\u91cd\u542f\u3002 \u4e09\u3001\u4f5c\u4e1a\u5904\u4e8e\u4e00\u76f4\u6392\u961f\u6216wait\u72b6\u6001\u5982\u4f55\u5904\u7406\uff1f \u00b6 1\u3001\u5982\u679c\u4f5c\u4e1a\u662f\u6392\u961f\u72b6\u6001\uff0c\u5219\u53ef\u80fd\u662f\u6b63\u5e38\u7684\u4e5f\u53ef\u80fd\u662f\u4e0d\u6b63\u5e38\u7684\uff1b\u5982\u679c\u4f5c\u4e1a\u5904\u4e8ewait\u72b6\u6001\uff0c\u5219\u4e00\u5b9a\u662f\u4e0d\u6b63\u5e38\u7684\u3002 2\u3001PBS\u548clsf\u4e00\u6837\uff0c\u4e5f\u5206\u4e3aserver\u7aef\u548cclient\u7aef\uff0c\u5947\u745epbs\u7684server\u7aef\u5728 CAELNSE1 \u8282\u70b9\uff0c\u4f5c\u4e1a\u901a\u8fc7web\u9875\u9762\u63d0\u4ea4\uff0c\u5982\u56fe\uff1a \u4f5c\u4e1a\u63d0\u4ea4\u5230\u5b8c\u6210\u6d41\u7a0b\uff1a\u4f5c\u4e1a\u88ab\u7528\u6237\u63d0\u4ea4\u540e\u2192server\u7aef\u6839\u636e\u63d0\u4ea4\u7684\u4fe1\u606f\u5206\u914d\u8ba1\u7b97\u8282\u70b9\u2192server\u7aefscp source\u6587\u4ef6\u5230\u8ba1\u7b97\u8282\u70b9\uff08\u5305\u62eclicense\u4fe1\u606f\u7b49\uff09\u2192\u8ba1\u7b97\u8282\u70b9\u5f00\u59cb\u8ba1\u7b97\u2192\u8ba1\u7b97\u5b8c\u6210\u540e\u590d\u5236\u5230\u672c\u5730\u7f13\u5b58\uff08\u591a\u4e2a\u8282\u70b9\u4e4b\u95f4\u901a\u8fc7autonfs\u5171\u4eab\u7f13\u5b58\u76ee\u5f55\uff09\u2192\u6700\u540e\u5c06\u8ba1\u7b97\u7ed3\u679cscp\u5230gpfs\u5171\u4eab\u76ee\u5f55\u3002 3\u3001\u4e00\u76f4wait\u72b6\u6001\u539f\u56e0\uff1a\u5927\u591a\u6570\u662f\u7531\u4e8e\u201cserver\u7aefscp source\u6587\u4ef6\u5230\u8ba1\u7b97\u8282\u70b9\uff08\u5305\u62eclicense\u4fe1\u606f\u7b49\uff09\u201d\u8fd9\u4e00\u6b65\u51fa\u9519\uff0c\u901a\u8fc7\u5728server\u8282\u70b9CAELNSE1\u67e5\u770b\u65e5\u5fd7 /var/spool/PBS/server_logs\uff08server\u65e5\u5fd7\u770bserver_logs\uff0c\u8ba1\u7b97\u65e5\u5fd7\u770bmom_logs\uff09/20201118\uff08\u65e5\u671f\uff09 \u5224\u65ad\uff0c scp\u5931\u8d25\u53ef\u80fd\u539f\u56e0\uff1a \u2460\u8282\u70b9\u6ca1\u505a\u4e92\u4fe1\uff08\u7528\u7528\u6237\u8d26\u53f7ssh\u8bd5\u8bd5\uff0c\u8fd8\u6709\u5c31\u662f\u7528\u6237\u7b2c\u4e00\u6b21\u767b\u9646\u63d0\u793ayes/no\u4e5f\u4f1a\u5f71\u54cd\uff09 \u2461\u88ab\u62f7\u8d1d\u7684\u8ba1\u7b97\u8282\u70b9down\u673a \u2462gpfs\u6216autofs\u6545\u969c \u2463\u8fd8\u6709\u53ef\u80fd\u662f\u7528\u6237\u63d0\u4ea4\u7684\u4f5c\u4e1a\u6570\u636e\u91cf\u592a\u5927\uff0c\u672c\u5730/scratch\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u53ef\u4ee5df -h\u67e5\u770b\u8282\u70b9/\u76ee\u5f55\u4f7f\u7528\u7387\uff0c\u6b64\u65f6\u5efa\u8bae\u7528\u6237\u628a\u4f5c\u4e1a\u63d0\u4ea4\u5230\u672c\u5730\u78c1\u76d8\u66f4\u5927\u7684\u8282\u70b9\u8ba1\u7b97\u6216\u8005\u6307\u5b9ascratch \u76ee\u5f55\u4e3a/gs/scratch\u76ee\u5f55\u3002\u4e4b\u540e\u518d\u65f6\u5220\u9664/scratch/\u76ee\u5f55\u4e2d\u4f5c\u4e1a\u5931\u8d25\u6b8b\u7559\u7684\u76ee\u5f55\u3002 4\u3001\u4e00\u76f4\u6392\u961fq\u72b6\u6001\u539f\u56e0\uff1a 1\uff09\u5148\u6839\u636e\u4f5c\u4e1a\u53f7\u68c0\u67e5\u539f\u56e0 qstat -fx \u4f5c\u4e1aid #\u6839\u636eid\u67e5\u770b\u4f5c\u4e1a\u8be6\u7ec6\u4fe1\u606f pestat|grep -i \u8282\u70b9\u540d #\u67e5\u770b\u67d0\u4e2a\u8282\u70b9\u7684\u4f5c\u4e1a\u4fe1\u606f\uff08id\u3001\u7528\u6237\u3001platform\u3001\u72b6\u6001\u7b49\uff09 2\uff09\u5982\u679c\u663e\u793a\u5173\u6ce8comment\u72b6\u6001\uff0c\u6b64\u79cd\u60c5\u51b5\u662f\u8282\u70b9\u8d44\u6e90\u4e0d\u591f\u5bfc\u81f4\uff0c\u8ba9\u7528\u6237\u7b49\u5f85\u5373\u53ef\u3002 3\uff09\u5982\u679c\u4e0d\u662f\u4ee5\u4e0a\u539f\u56e0\u5bfc\u81f4\uff0c\u5219\u53ef\u80fd\u662f\u7531\u4e8e\u201cserver\u7aefscp source\u6587\u4ef6\u5230\u8ba1\u7b97\u8282\u70b9\uff08\u5305\u62eclicense\u4fe1\u606f\u7b49\uff09\u201d\u8fd9\u4e00\u6b65\u51fa\u9519\uff0c\u901a\u8fc7\u5728server\u8282\u70b9CAELNSE1\u67e5\u770b\u65e5\u5fd7 /var/spool/PBS/server_logs\uff08server\u65e5\u5fd7\u770bserver_logs\uff0c\u8ba1\u7b97\u65e5\u5fd7\u770bmom_logs\uff09/20201118\uff08\u65e5\u671f\uff09 \u5224\u65ad\uff0c scp\u5931\u8d25\u53ef\u80fd\u539f\u56e0\uff1a \u2460\u8282\u70b9\u6ca1\u505a\u4e92\u4fe1 \u2461\u88ab\u62f7\u8d1d\u7684\u8ba1\u7b97\u8282\u70b9down\u673a \u2462gpfs\u6216autofs\u6545\u969c \u56db\u3001\u96c6\u6210\u8f6f\u4ef6\uff08starccm\u3001VAOne\uff09\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\uff08license\u3001mpi\u8fd0\u884c\u73af\u5883\u7b49\uff09\u8bf4\u660e\u3002 \u00b6 \u56e0\u4e3apbs\u4e2d\u8f6f\u4ef6\u90fd\u662f\u96c6\u6210\u5230web\u754c\u9762\u4e0a\uff0cweb\u754c\u9762\u662f\u7531/var/spool/pas\u76ee\u5f55\u4e0b\u7684\u914d\u7f6e\u6587\u4ef6\u63a7\u5236\uff0c\u6240\u4ee5\u672c\u6848\u4f8b\u4e2dVAOne\u8f6f\u4ef6\u76f8\u5173\u914d\u7f6e\u6587\u4ef6\u4e5f\u5728\u6b64\u76ee\u5f55\u4e0b\u3002 cd /var/spool/pas/repository/applications cd VAOne/runtime vim start.sh license\u76f8\u5173 \uff1a export CDLMD_LICENSE_FILE=/gs/apps/CCM1406/ccm1406R8license.dat mpi\u76f8\u5173\uff1a \u8bbe\u7f6e\u4e3a\u8d70ib\u7f51\u7edc \u00b6 export MPIRUN_OPTIONS=\"-v -IBV -cpu_bind -e MPI_IB_PKEY=0x8df1,0x7fff\" \u8bbe\u7f6e\u4e3a\u8d70\u666e\u901a\u7f51\u7edc \u00b6 export MPIRUN_OPTIONS=\"-v -TCP -cpu_bind\" \u4e4b\u540e\u8fdb\u5165cd /var/spool/pas/repository rm -rf time_stamp.txt \u4e94\u3001\u8d44\u6e90\u6c60\u6062\u590d\u548c\u5220\u9664 \u00b6 \u793a\u4f8b\uff1a49\u8282\u70b9CPU\u66f4\u6362\u540e\uff0c\u9700\u8981\u8c03\u6574\u4e0b\u8d44\u6e90\u6c60\uff0c\u6b63\u5e38\u6295\u5165\u4f7f\u7528\uff1f \u6062\u590d\u8282\u70b9\u8d44\u6e90\u6c60\uff1a 1.\u67e5\u770b\u8282\u70b9\u5f53\u524d\u8d44\u6e90\u6c60\u540d\u79f0\u3002\uff08\u6b64\u6b65\u53ef\u9009\uff09 pestat|grep -i caeope49 2.\u67e5\u770b\u8282\u70b9\u8d44\u6e90\u6c60\u548c\u5176\u4ed6\u4fe1\u606f\u3002\uff08\u6b64\u6b65\u53ef\u9009\uff09 qmgr -c \"p n CAEOPE49\" qmgr -c \"p n CAEOPE50\" 3.\u8c03\u6574\u8282\u70b9\u8d44\u6e90\u6c60 qmgr -c \"set node CAEOPE49 resources_available.platform = E52667-16c-256G\" 4.\u628a\u8f6f\u4ef6\u96c6\u6210\u5230\u8d44\u6e90\u6c60(\u8d44\u6e90\u6c60\u4e2d\u7684\u6240\u6709\u8282\u70b9\u90fd\u8981\u4e00\u4e2a\u4e00\u4e2a\u6dfb\u52a0) qmgr -c \"set node CAEOPE49 resources_available.pas_applications_enabled += Dyna-mmp\" qmgr -c \"set node CAEOPE50 resources_available.pas_applications_enabled += Dyna-mmp\" ... 5.\u628a\u8f6f\u4ef6\u8d44\u6e90\u6c60\u6dfb\u52a0\u5230xml\u6a21\u677f cd /var/spool/pas/repository/applications/ cd Dyna-mmp/ vim app-inp-Dyna-mmp.xml 6.\u68c0\u67e5\u8f6f\u4ef6\u63d0\u4ea4\u6a21\u677f\u914d\u7f6e vim Dyna-mpp/submittime/presubmit.py 7.\u68c0\u67e5\u8f6f\u4ef6\u662f\u5426\u52a0\u5165\u5230\u8d44\u6e90\u6c60\u5176\u4ed6\u914d\u7f6e\u6587\u4ef6\u4e2d vim /var/spool/PBS/server_priv/resourcedef nastran type=long \u68c0\u67e5\u662f\u5426\u6709\u6b64\u884c\uff0c\u6ca1\u6709\u5219\u6309\u6b64\u683c\u5f0f\u6dfb\u52a0\uff1a\u8f6f\u4ef6\u540d type=long vim /var/spool/PBS/sched_priv/sched_config \u68c0\u67e5\u8fd9\u91cc\u662f\u5426\u6709\u65b0\u8f6f\u4ef6\u540d\uff0c\u6ca1\u6709\u5219\u6dfb\u52a0 7.\u67e5\u770b\u8d44\u6e90\u6c60\u8c03\u6574\u540e\u4fe1\u606f qmgr -c \"p n CAEOPE49\" \u5220\u9664\u8d44\u6e90\u6c60\uff1a 1.\u8fdb\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55 cd /var/spool/pas/repository/applications/ cd Abaqus-smp/ 2.\u7f16\u8f91xml\u6587\u4ef6\uff0c\u6ce8\u91ca\u6216\u5220\u9664 vim app-inp-Abaqus-smp.xml 3.\u5220\u9664\u8f6f\u4ef6\u8d44\u6e90\u6c60(\u8d44\u6e90\u6c60\u4e2d\u7684\u6240\u6709\u8282\u70b9\u90fd\u8981\u4e00\u4e2a\u4e00\u4e2a\u5220\u9664) qmgr -c \"set node CAEOPE49 resources_available.pas_applications_enabled -= Dyna\" qmgr -c \"set node CAEOPE50 resources_available.pas_applications_enabled -= Dyna\" ... 4.\u6700\u540e\u79fb\u52a8\u6587\u4ef6\u5230tmp\u76ee\u5f55\u6216\u5220\u9664time\u6587\u4ef6 cd /var/spool/pas/repository mv time_stamp.txt /tmp/ \u516d\u3001server\u8282\u70b9df -h\u5361\u4f4f \u00b6 \u5927\u591a\u6570\u60c5\u51b5\u662f\u67d0\u4e2a\u8282\u70b9\u65e0\u6cd5ssh\uff0cnfs\u6302\u8f7d\u51fa\u95ee\u9898\u4e86\uff0c\u5f3a\u884c\u5378\u8f7d\u95ee\u9898\u8282\u70b9\u7684nfs\u5373\u53ef\u3002 umount -l /pbs/CAEOPE25 PS\uff1a\u90a3\u4e48\u5982\u4f55\u77e5\u9053\u662f\u54ea\u4e2a\u8282\u70b9\u6302\u4e86\u5462\uff1f\u4fe9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u627e\u5230\uff1a 1.\u901a\u8fc7\u547d\u4ee4pestat|grep -i down\u67e5\u627edown\u673a\u7684\u8282\u70b9 2.\u7b2c\u4e00\u79cd\u5982\u679c\u6ca1\u627e\u5230\uff0c\u5c31\u7528\u7b2c\u4e8c\u79cd\u67e5\u627e\uff0c\u547d\u4ee4\u4e3a shell strace df -h \u4e03\u3001\u4f5c\u4e1a\u63d0\u4ea4\u5931\u8d25 \u00b6 \u7b2c\u4e00\u79cd\uff1a\u53ef\u4ee5\u901a\u8fc7qstat -xf 297766|grep stage\u67e5\u770b\u8f93\u51fa\u76ee\u5f55\uff0c\u8fdb\u5165\u8f93\u51fa\u76ee\u5f55\u4e2d\u67e5\u770b\u65e5\u5fd7 \u7b2c\u4e8c\u79cd\uff1a\u901a\u8fc7\u56fe\u5f62\u754c\u9762\u67e5\u770b\u8f93\u51fa\u65e5\u5fd7 \u534e\u4e3a\u4e91\u73af\u5883\u4e2d\u63d0\u4ea4\u591a\u8282\u70b9\u4f5c\u4e1a\u62a5\u9519\u89e3\u51b3\uff1a touch /etc/profile.d/mpi.sh echo \"export MPI_IB_PKEY=0x8df1,0x7fff\" > /etc/profile.d/mpi.sh \u516b\u3001\u63d0\u4ea4\u4f5c\u4e1a\u811a\u672c \u00b6 #!/bin/bash #PBS -l nodes=1:ppn=16:ngpus=1:platform=E52667-16c-256G #PBS -N test #env > env.out sleep 100 /gs/CAE/STR/NASTRAN/2013/bin/nast20131 T19C_M1EM_unitload_gaijin1_cewei_20210112.bdf parallel = 16 memory = 120gb #\u5bf9\u4e8e\u7a0b\u5e8f\u7684\u547d\u4ee4\uff0c\u53ef\u4ee5\u5728out\u6587\u4ef6\u4e2d\u627e\u5230 \u811a\u672c\u8bf4\u660e\uff1anodes\u5b9a\u4e49\u8282\u70b9\u6570\uff1bppn\u5b9a\u4e49\u5355\u53f0\u8282\u70b9\u4f7f\u7528\u7684\u6700\u5927\u6838\u6570\uff1bngpus\u5b9a\u4e49\u5355\u53f0gpu\u8282\u70b9\u4f7f\u7528\u7684\u6700\u5927gpu\u6838\u6570\uff1bplatform\u5b9a\u4e49\u63d0\u4ea4\u5230\u7684\u8d44\u6e90\u6c60\uff08\u6ce8\u610f\u8d44\u6e90\u6c60\u540d\u79f0\u53ea\u5305\u542bCPU\u578b\u53f7-CPU\u6838\u6570-\u5185\u5b58\u5927\u5c0f\uff09\uff1btest\u5b9a\u4e49\u4f5c\u4e1a\u540d qsub < *.sh \u4e5d\u3001\u66ff\u6362altair\u7684license \u00b6 altair\u7684license\u683c\u5f0f\u4e00\u822c\u4e3a\uff1aALCH_CHAU_20210210_526858.dat \u66ff\u6362\u6b65\u9aa4\uff1a #1\u3001\u8fdb\u5165license\u76ee\u5f55\uff0c\u5e76\u5c06license\u4f20\u8fdb\u6765 cd /usr/local/altair/licensing13.2/ #2\u3001\u7ed9license\u6267\u884c\u6743\u9650 chmod +x ALCH_CHAU_20210210_526858.dat #3\u3001\u7f16\u8f91license\u6240\u5728\u8def\u5f84\u7684\u914d\u7f6e\u6587\u4ef6 vim ltair-serv.cfg #4\u3001\u91cd\u542faltair\u670d\u52a1 /etc/init.d/altairlmxd restart #5\u3001\u91cd\u542fpbs\u670d\u52a1 /etc/init.d/pbs restart \u7b2c\u4e94\u6b65\u8fd9\u91cc\u53ef\u80fd\u51fa\u73b0\u62a5\u9519\u5982\u4e0b\uff1a \u8fd9\u65f6\u5019\u9700\u8981\u4fee\u6539pbs\u6267\u884c\u8fdb\u7a0b\u4e3a\u5bf9\u5e94\u7248\u672c\u540e\u518d\u91cd\u542f which qstat cd /opt/pbs/bin/ cp qstat.18 qstat /etc/init.d/pbs restart \u4e4b\u540e\u518d\u4fee\u6539\u56de\u6765\u91cd\u542fpbsworks cp qstat.13 qstat #6\u3001\u91cd\u542fpbsworks /etc/init.d/pbsworks restart #7\u3001\u67e5\u770blicense\u4fe1\u606f /usr/local/altair/licensing13.2/bin/almutil -licstat -host mgt -port 6200 \u5982\u56fe\u80fd\u770b\u5230license\u5230\u671f\u65f6\u95f4\u5219\u8bf4\u660e\u66ff\u6362\u6210\u529f \u5341\u3001\u96c6\u6210\u8f6f\u4ef6\uff08\u4fee\u6539\u914d\u7f6e\uff09 \u00b6 \u5927\u81f4\u6d41\u7a0b\uff1a \u65b9\u5f0f\u4e00\uff1a\u5df2\u96c6\u6210\u8fc7\u7684\u8f6f\u4ef6\uff0c\u65b0\u589e\u7248\u672c\uff1a 1\u3001\u4fee\u6539site-config.xml \u6587\u4ef6 2\u3001rmtime \u65b9\u5f0f\u4e8c\uff1a\u65b0\u589e\u8f6f\u4ef6\u96c6\u6210\uff1a 1\u3001\u4fee\u6539site-config.xml \u6587\u4ef6 2\u3001copy application/appsname #\u627e\u4e00\u4e2a\u548c\u65b0\u96c6\u6210\u5e94\u7528\u53c2\u6570\u63a5\u8fd1\u7684\u65e7\u5e94\u7528\u6a21\u677f\uff0c\u53ef\u4ee5\u901a\u8fc7web\u9875\u9762\u8f6f\u4ef6\u5217\u8868\u4e00\u4e2a\u4e2a\u70b9\u5f00\u5bf9\u6bd4\u3002 3\u3001\u4fee\u6539runtime/start.sh \u6216 runtime/start.py #\u4e3b\u8981\u662f\u4fee\u6539\u4f5c\u4e1a\u63d0\u4ea4\u7684\u4e00\u4e9b\u547d\u4ee4\uff0c\u6b64\u811a\u672c\u4e2d\u7684\u5185\u5bb9\u627e\u8c01\u5b89\u88c5\u8f6f\u4ef6\u7684\u8c01\u6709\u3002\uff08\u8fd9\u91ccsh\u6216py\u7684\u9009\u62e9\u6839\u636e\u914d\u7f6eapp-conv-StarCCM.xml: runtime/start.sh \u4e2d\u7684\u6307\u5411\u51b3\u5b9a\uff09 4\u3001\u4fee\u6539submittime/presubmit.py #(\u53ef\u9009)\u6b64\u811a\u672c\u7528\u6765\u4fee\u6539\u9488\u5bf9\u8d44\u6e90\u6c60\u7684\u4e00\u4e9b\u7279\u5b9a\u4f7f\u7528\u89c4\u5219\uff0c\u6bd4\u5982\u4e0d\u901a\u8d44\u6e90\u6c60\u8bbe\u7f6e\u5bf9\u5e94\u7684cpu\u6838\u6570\uff0c\u6309\u9700\u8bbe\u7f6e\u76f8\u5e94\u7684\u4f5c\u4e1a\u8fd0\u884c\u65f6\u95f4\u7b49\u3002 5\u3001\u4fee\u6539app-actions-StarCCM.xml app-conv-StarCCM.xml app-inp-StarCCM.xml runtime/start.sh \u6216 runtime/start.py submittime/presubmit.py \u4e94\u4e2a\u914d\u7f6e\u6587\u4ef6\u91cc\u9762\u6709\u5173\u8f6f\u4ef6\u540d\u53c2\u6570\u5168\u90e8\u66ff\u6362\u6210\u8981\u96c6\u6210\u7684\u65b0\u8f6f\u4ef6\u540d\uff0c\u540c\u65f6\u4fee\u6539app-actions-StarCCM.xml app-conv-StarCCM.xml app-inp-StarCCM.xml \u4e09\u4e2a\u6587\u4ef6\u540d\u4e3a\u65b0\u8f6f\u4ef6\u540d\u3002 6\u3001\u4fee\u6539license\u83b7\u53d6\u811a\u672c 7\u3001\u4fee\u6539/var/spool/PBS/server_priv/resourcedef #\u5173\u4e8elicense\u914d\u7f6e\uff0c\u5982\u679clicense\u662f\u65e0\u9650\u70b9\u6570\uff0c\u8fd9\u91cc\u4e0d\u7528\u4fee\u6539\uff0c\u4fee\u6539\u53c2\u8003word\uff1aD:\\cyrus\\\u5965\u5de5\u79d1\u6280\\\u9879\u76ee\u6c47\u603b\\\u5947\u745e\uff08\u8fd0\u7ef4\uff09\\pbs license\u8c03\u5ea6.docx 8\u3001\u4fee\u6539/var/spool/PBS/sched_priv/sched_config #\u5173\u4e8elicense\u914d\u7f6e\uff0c\u5982\u679clicense\u662f\u65e0\u9650\u70b9\u6570\uff0c\u8fd9\u91cc\u4e0d\u7528\u4fee\u6539\uff0c\u4fee\u6539\u53c2\u8003word\uff1aD:\\cyrus\\\u5965\u5de5\u79d1\u6280\\\u9879\u76ee\u6c47\u603b\\\u5947\u745e\uff08\u8fd0\u7ef4\uff09\\pbs license\u8c03\u5ea6.docx \u8bf4\u660e\uff1a\u914d\u7f6e\u6587\u4ef6\u548c\u6a21\u677f\u5b58\u653e\u76ee\u5f55\u5728\u65e7\u7248pbs\u548c\u65b0\u7248pbs\u4e2d\u4e0d\u4e00\u6837\u3002 \u65e7\u7248PBS: \u6a21\u677f\u5b58\u653e\u4f4d\u7f6e:/var/spool/pas/repository/applications \u914d\u7f6e\u6587\u4ef6\u5b58\u653e\u4f4d\u7f6e\uff1a/var/spool/pas/repository/site-config.xml \u65b0\u7248PBS: \u6a21\u677f\u5b58\u653e\u4f4d\u7f6e\uff1a/var/spool/pbsworks/2020.4/access/home/data/pas/targets/localhost/repository/applications/ \u914d\u7f6e\u6587\u4ef6\u5b58\u653e\u4f4d\u7f6e\uff1a/var/spool/pbsworks/2020.4/access/home/data/pas/targets/localhost/repository/site-config.xml \u4fee\u6539\u6b65\u9aa4\uff1a 1.\u628a\u6a21\u677f\u653e\u7f6e\u4e8e\u76f8\u5e94\u76ee\u5f55\u4e0b\uff08\u65b0\u65e7\u6a21\u677f\u4e0d\u901a\u7528\uff0c\u6a21\u677f\u53ef\u4ee5\u627e\u5382\u5bb6\u8981\uff0c\u4e5f\u53ef\u4ee5\u62f7\u8d1d\u96c6\u6210\u597d\u7684\u8f6f\u4ef6\u6a21\u677f\u518d\u505a\u4fee\u6539\uff09 #\u8fd9\u91cc\u4ee5\u65e7\u7248pbs\u65b0\u589e\u96c6\u6210Preonlab\u8f6f\u4ef6\u4e3a\u4f8b(\u5047\u8bbe\u6ca1\u627e\u5382\u5bb6\u8981\u6a21\u677f)\uff1a cd /var/spool/pas/repository/applications/ cp -r /var/spool/pas/repository/applications/StarCCM Preonlab #\u8fd9\u91cc\u7684Preonlab\u8981\u8ddf\u4e0b\u4e00\u6b65\u4e2did\u540e\u9762\u4e00\u6837 chmod -R 755 Preonlab cd Preonlab mv app-actions-StarCCM.xml app-actions-Preonlab.xml #\u8fd9\u91cc\u7684Preonlab\u8981\u8ddf\u4e0b\u4e00\u6b65\u4e2did\u540e\u9762\u4e00\u6837 mv app-conv-StarCCM.xml app-conv-Preonlab.xml #\u8fd9\u91cc\u7684Preonlab\u8981\u8ddf\u4e0b\u4e00\u6b65\u4e2did\u540e\u9762\u4e00\u6837\uff0c\u6b64\u914d\u7f6e\u6587\u4ef6\u7528\u6765\u5c06web\u9875\u9762\u4e2d\u7684\u952e\u5165\u53c2\u6570\u4f20\u9012\u5230\u540e\u53f0 mv app-inp-StarCCM.xml app-inp-Preonlab.xml #\u8fd9\u91cc\u7684Preonlab\u8981\u8ddf\u4e0b\u4e00\u6b65\u4e2did\u540e\u9762\u4e00\u6837 vi runtime/start.sh #\u4e3b\u8981\u662f\u4fee\u6539\u4f5c\u4e1a\u63d0\u4ea4\u7684\u4e00\u4e9b\u547d\u4ee4\uff0c\u6b64\u811a\u672c\u4e2d\u7684\u5185\u5bb9\u627e\u8c01\u5b89\u88c5\u8f6f\u4ef6\u7684\u8c01\u6709 vim submittime/presubmit.py #(\u53ef\u9009)\u6b64\u811a\u672c\u7528\u6765\u4fee\u6539\u9488\u5bf9\u8d44\u6e90\u6c60\u7684\u4e00\u4e9b\u7279\u5b9a\u4f7f\u7528\u89c4\u5219\uff0c\u6bd4\u5982\u4e0d\u901a\u8d44\u6e90\u6c60\u8bbe\u7f6e\u5bf9\u5e94\u7684cpu\u6838\u6570\uff0c\u6309\u9700\u8bbe\u7f6e\u76f8\u5e94\u7684\u4f5c\u4e1a\u8fd0\u884c\u65f6\u95f4\u7b49\u3002\uff08\u8fd9\u91ccsh\u6216py\u7684\u9009\u62e9\u6839\u636e\u914d\u7f6eapp-conv-StarCCM.xml: <jsdl-hpcp:Argument>runtime/start.sh</jsdl-hpcp:Argument>\u4e2d\u7684\u6307\u5411\u51b3\u5b9a\uff09 \u8865\u5145\uff1a\u4fee\u6539app-actions-StarCCM.xml app-conv-StarCCM.xml app-inp-StarCCM.xml runtime/start.sh \u6216 runtime/start.py submittime/presubmit.py \u4e94\u4e2a\u914d\u7f6e\u6587\u4ef6\u91cc\u9762\u6709\u5173\u8f6f\u4ef6\u540d\u53c2\u6570\u5168\u90e8\u66ff\u6362\u6210\u8981\u96c6\u6210\u7684\u65b0\u8f6f\u4ef6\u540d\uff0c\u540c\u65f6\u4fee\u6539app-actions-StarCCM.xml app-conv-StarCCM.xml app-inp-StarCCM.xml \u4e09\u4e2a\u6587\u4ef6\u540d\u4e3a\u65b0\u8f6f\u4ef6\u540d\u3002 vim /var/spool/PBS/server_priv/resourcedef #(\u53ef\u9009)\u5173\u4e8elicense\u914d\u7f6e\uff0c\u5982\u679clicense\u662f\u65e0\u9650\u70b9\u6570\uff0c\u8fd9\u91cc\u4e0d\u7528\u4fee\u6539\uff0c\u4fee\u6539\u53c2\u8003word\uff1aD:\\cyrus\\\u5965\u5de5\u79d1\u6280\\\u9879\u76ee\u6c47\u603b\\\u5947\u745e\uff08\u8fd0\u7ef4\uff09\\pbs license\u8c03\u5ea6.docx vim /var/spool/PBS/sched_priv/sched_config #(\u53ef\u9009)\u5173\u4e8elicense\u914d\u7f6e\uff0c\u5982\u679clicense\u662f\u65e0\u9650\u70b9\u6570\uff0c\u8fd9\u91cc\u4e0d\u7528\u4fee\u6539\uff0c\u4fee\u6539\u53c2\u8003word\uff1aD:\\cyrus\\\u5965\u5de5\u79d1\u6280\\\u9879\u76ee\u6c47\u603b\\\u5947\u745e\uff08\u8fd0\u7ef4\uff09\\pbs license\u8c03\u5ea6.docx \u6ce8\u610f\uff0c\u4e0a\u9762\u6dfb\u52a0\u7684\u7ea2\u6846\u540d\u79f0\u8981\u548c\u4e0a\u4e00\u6b65\u4e2d\u6dfb\u52a0\u7684\u540d\u79f0\u4e00\u81f4\u3002 \u6ce8\u610f\uff0c\u8fd9\u91cc\u7ea2\u6846\u540d\u79f0\u4e5f\u8981\u548c\u524d\u9762\u4e00\u81f4\uff0c\u7136\u540e\u52a0\u4e0alicense\u70b9\u6570\u83b7\u53d6\u811a\u672c\u7684\u8def\u5f84 # \u7f16\u5199license\u70b9\u6570\u83b7\u53d6\u811a\u672c\uff08\u811a\u672c\u5185\u5bb9\u53c2\u8003\u524d\u9762\u5199\u7684\u914d\u7f6e\u4e0a\u7684\u811a\u672c\uff09\uff08\u6b64\u811a\u672c\u7528\u6765\u83b7\u53d6\u5f53\u524dlicense\u7ba1\u7406\u5668\u4e2d\u5269\u4f59\u7684\u70b9\u6570\uff09 vim /usr/local/bin/crachfem_lic.sh #!/bin/bash #/usr/local/bin/lmutil lmstat -c 27000@10.1.7.39 -f abaqus | grep \"Users of abaqus\" |awk '{avail=$6 - $11}END{print avail}' use = ` /gs/CAE/STR/ABAQUS/2017/SIMULIA/Commands/abaqus licensing dslsstat -server 10 .1.7.39:4085 | grep Token | grep 210 | awk '{print $12}' | awk '{sum+=$1}END{print sum}' ` total_license = 210 ava = ` expr $total_license - $use ` echo $ava /usr/local/bin/lmutil lmstat -c 7790 @10.2.9.124 -a total_license = $( /usr/local/bin/lmutil lmstat -c 7790 @10.2.9.124 -a | grep lsdyna | awk '{print $6}' ) use = $( /usr/local/bin/lmutil lmstat -c 7790 @10.2.9.124 -a | grep lsdyna | awk '{print $11}' ) ava = $(( $total_license - $use )) echo $ava # \u4fee\u6539\u63d0\u4ea4\u6a21\u677f\uff0c vim submittime/presubmit.py 2.\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff08\u6dfb\u52a0\u4ec0\u4e48\u8f6f\u4ef6\u5c31\u6309\u60c5\u51b5\u6dfb\u52a0\u5230\u914d\u7f6e\u6587\u4ef6\u4e2d\uff09 <Application id = \"Preonlab\" > #\u8fd9\u91ccid\u540e\u9762\u4fee\u6539\u6210\u4e0a\u4e00\u6b65\u4e2dapp-actions-Preonlab.xml\u540d\u79f0\u91cc\u7684Preonlab <ApplicationVersions> <ApplicationVersion> <Option>5.2a</Option> <Executable>/gs/CAE/STR/ECS/FEMFAT5.2a/bin/femfat</Executable> #\u8fd9\u91cc\u4fee\u6539\u6210\u8f6f\u4ef6\u5b89\u88c5\u76ee\u5f55 </ApplicationVersion> <ApplicationVersion> <Option>5.2b</Option> <Executable>/gs/CAE/STR/ECS/FEMFAT5.2b/bin/femfat</Executable> #\u8fd9\u91cc\u4fee\u6539\u6210\u8f6f\u4ef6\u5b89\u88c5\u76ee\u5f55 </ApplicationVersion> <ApplicationVersion> <Option>5.3</Option> <Executable>/gs/CAE/STR/ECS/FEMFAT5.3/bin/femfat</Executable> #\u8fd9\u91cc\u4fee\u6539\u6210\u8f6f\u4ef6\u5b89\u88c5\u76ee\u5f55 </ApplicationVersion> </ApplicationVersions> </Application> 3.\u4e4b\u540e\u8fdb\u5165rm -rf /var/spool/pas/repository/time_stamp.txt 4.\u5c06\u8f6f\u4ef6\u52a0\u5165\u8d44\u6e90\u6c60 qmgr -c \"set node CAEOPE40 resources_available.pas_applications_enabled += Radioss\" ... \u5341\u4e00\u3001web\u9875\u9762\u65e0\u6cd5\u63d0\u4ea4\u4f5c\u4e1a\u6216\u63d0\u4ea4\u4f5c\u4e1a\u63d0\u793aUnknown.zac(Unknown Source)\u7b49\u9519\u8bef \u00b6 \u6545\u969c\u622a\u56fe\uff1a # 1.\u67e5\u770bpbswork\u914d\u7f6e\u6587\u4ef6\u53c2\u6570 cat /etc/pbsworks.conf | grep CONFIG_HOME # 2.\u6839\u636e\u63d0\u4ea4\u4f5c\u4e1a\u7684\u7528\u6237\u540d\u8fdb\u884c\u4e09\u4e2a\u914d\u7f6e\u6587\u4ef6\u7684\u5220\u9664 rm -f $CONFIG_HOME /services/framework/data/users/<user_name>.xml rm -f $CONFIG_HOME /services/cm/data/users/<user_name>.xml rm -f $CONFIG_HOME /services/dm/data/users/<user_name>.xml \u811a\u672c\u8def\u5f84 \u811a\u672c\u4f7f\u7528\u8bf4\u660e /gs2/oglab/scripts/clean_user_xml.sh \u6267\u884c\u540e\uff0c\u8f93\u5165\u9700\u8981\u5220\u9664\u7684\u7528\u6237\u540d\u56de\u8f66\u5373\u53ef \u5341\u4e8c\u3001nastran-smp\u4f5c\u4e1a\u65e0\u6cd5\u8ba1\u7b97\u6210\u529f\uff0c\u4e00\u76f4\u5904\u4e8e\u8ba1\u7b97\u4e2d \u00b6 \u6545\u969c\u95ee\u9898\u8bf4\u660e\uff1a wangyingying\u7528\u6237\u63d0\u4ea4\u7684nastran-smp\u4f5c\u4e1a\u65e0\u6cd5\u8ba1\u7b97\u6210\u529f\uff0c\u4e00\u76f4\u5904\u4e8e\u8ba1\u7b97\u4e2d\uff0c\u5c0f\u7684\u7b97\u4f8b\u53ef\u4ee5\uff0c\u5927\u7684\u4e0d\u884c\uff0c\u4e14\u540c\u6837\u7684\u6a21\u578b\uff0c\u6211\u7528optistruct\u53ef\u4ee5\u8ba1\u7b97\u6210\u529f\u3002\u540c\u65f6\u7528\u6237\u8fd8\u53cd\u6620\u7b2c\u4e00\u6b21\u63d0\u4ea4\u4f5c\u4e1a\u8fd8\u63d0\u793a\u4e86\u5185\u5b58\u76f8\u5173\u7684\u62a5\u9519\u3002 \u6392\u67e5\u8fc7\u7a0b\uff1a 1.\u6000\u7591\u662f\u5185\u5b58\u6216\u672c\u5730\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u5bfc\u81f4\uff0c\u68c0\u67e5\u53d1\u73b0\u5269\u4f59\u8d44\u6e90\u5145\u8db3 2.\u6000\u7591\u662f\u76f8\u5173\u914d\u7f6e\u505a\u4e86\u8d44\u6e90\u4f7f\u7528\u9650\u5236 3.\u8fdb\u8ba1\u7b97\u8282\u70b9\u7684/scratch\u76ee\u5f55\u4e2d\u67e5\u770b\u4f5c\u4e1a.o\u548c.e\u6587\u4ef6\uff0c\u90fd\u6ca1\u6709\u9519\u8bef\uff0c\u5219\u53ef\u80fd\u662f\u7528\u6237\u7b97\u529b\u95ee\u9898\u3002 \u6700\u7ec8\u89e3\u51b3\uff1a \u786e\u5b9e\u662f\u8f6f\u4ef6\u8fd0\u884c\u73af\u5883\u4e2d\u9650\u5236\u4e86\u5185\u5b58\u4f7f\u7528\uff0c\u5982\u4e0b\u662f\u4fee\u6539\u8fc7\u7a0b\uff1a vim /var/spool/pas/repository/applications/Nastran-smp/runtime/start.py \u5c06\u622a\u56fe\u6240\u793a\u590432\u4fee\u6539\u621016\uff0c\u4fee\u6539\u5b8c\u65e0\u9700\u91cd\u542f\u670d\u52a1\uff0c\u91cd\u65b0\u63d0\u4ea4\u4f5c\u4e1a\u5373\u53ef \u00b6 \u5341\u4e09\u3001altair\u8f6f\u4ef6\u5b89\u88c5 \u00b6 license\u7ba1\u7406\u5668\u5b89\u88c5\uff1a chmod +x *.bin # \u6267\u884c\u5b89\u88c5\uff0c\u4e2d\u95f4\u4f1a\u8981\u6c42\u586b\u4e0alicense\u6587\u4ef6\u4f4d\u7f6e\uff0c\u53ef\u4ee5\u9009no\u8df3\u8fc7\u7b49\u7ba1\u7406\u5668\u5b89\u88c5\u5b8c\u518d\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u4e5f\u884c ./ *.bin # \uff08\u53ef\u9009\uff09\u6b64\u6b65\u9aa4\u662f\u4e3a\u4e86\u4f7flicense\u7ba1\u7406\u5668\u8bc6\u522blicense\u6587\u4ef6\uff0c\u5982\u679c\u4e0a\u4e00\u6b65\u5df2\u7ecf\u6307\u5b9a\u4e86license\u6587\u4ef6\u4f4d\u7f6e\u5b89\u88c5\uff0c\u8fd9\u91cc\u5c31\u53ef\u4ee5\u4e0d\u7528\u518d\u505a vi /usr/local/altair/licensing14.5/altair-serv.cfg # (\u53ef\u9009) \u91cd\u542flicense\u7ba1\u7406\u5668 /etc/init.d/altairlmxd restart # \u68c0\u67e5license\u670d\u52a1\u662f\u5426\u542f\u52a8 netstat -nlp | grep 6200 altair \u4e00\u4e9b\u8f6f\u4ef6\u5b89\u88c5\uff1a chmod +x *.bin # \u6267\u884c\u5b89\u88c5\uff0c\u4e2d\u95f4\u4f1a\u8981\u6c42\u586b\u5199\u5b89\u88c5\u8def\u5f84\uff0c\u5176\u4f59\u4e00\u8defyes\u5373\u53ef ./ *.bin \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u547d\u4ee4\u884c\u5229\u7528\u811a\u672c\u8fd0\u884c\u7a0b\u5e8f\uff0c\u4e0b\u9762\u662f\u5df2ufx\u8f6f\u4ef6\u4e3a\u4f8b\u7684\u811a\u672c\uff1a #!/bin/bash # license\u8def\u5f84 export ALTAIR_LICENSE_PATH = 6200 @gpu08 # \u8fd9\u4e00\u53e5\u662f\u6307\u5b9a\u663e\u5361\u5757\uff0c\u53ef\u7528nvidia-smi\u67e5\u770b\u5230 export CUDA_VISIBLE_DEVICES = 0 ,1,2,3,4,5,6,7 # \u8f6f\u4ef6\u5b89\u88c5\u4f4d\u7f6e source /seu_share/apps/hw2020.1/altair/hwcfdsolvers/ultrafluidx/linux64/scripts/set_uFX_environment.sh # \u8fd0\u884cufx\u8f6f\u4ef6(-np\u540e\u9762\u8bbe\u7f6e\u9700\u8981\u7684cpu\u6838\u6570\uff0cultraFluidX\u540e\u9762\u8bbe\u7f6e\u8ba1\u7b97\u7684\u6587\u4ef6) nohup mpirun -np 24 ultraFluidX *.xml > output.txt & \u5341\u56db\u3001dyna license\u66ff\u6362 \u00b6 \u66ff\u6362\uff08\u53ea\u5728CAELNSE1\u4e2d\u64cd\u4f5c\uff09\uff1a # 1.\u767b\u5f55\u5230CAELNSE1\u8282\u70b9 # 2.\u67e5\u770blicense\u8fdb\u7a0b ps -elf | grep lstc_server # 2.\u8fdb\u5165license\u7ba1\u7406\u76ee\u5f55 cd /gs/home/zhangyingjun/mac_abstract/save1 # 3.\u5907\u4efd\u539flicense mv server_data server_data.bak # 4.\u5c06\u65b0license\u62f7\u8d1d\u8fdb\u6765 cp /gs2/server_data . # 5.\u67e5\u770blicense\u8fdb\u7a0b ps -elf | grep lstc_server # 6.\u5173\u95edlicense\u8fdb\u7a0b kill -9 \u8fdb\u7a0bid # 7.\u542f\u52a8license\u8fdb\u7a0b /gs/home/zhangyingjun/mac_abstract/save1/lstc_server -n -l /gs/home/zhangyingjun/mac_abstract/save1/logfie # 8.\u67e5\u770blicense\u72b6\u6001 /gs/home/zhangyingjun/mac_abstract/save1/lstc_qrun -s localhost -r \u66ff\u6362\u540e\u4fee\u6539dyna licens\u70b9\u6570\uff1a # \u8be2\u95eedyna license\u4f9b\u5e94\u5546\u589e\u52a0\u7684license\u70b9\u6570\uff08\u6bd4\u5982\u65b0\u589e\u4e86400\uff09 # \u67e5\u627edyna\u811a\u672c\u4f4d\u7f6e cat /var/spool/PBS/sched_priv/sched_config | grep dyna # \u6839\u636e\u4e0a\u4e00\u6b65\u67e5\u770b\u5230\u7684\u811a\u672c\u4f4d\u7f6e\u7f16\u8f91dyna\u811a\u672c\u6587\u4ef6,\u6bd4\u5982CAELNSE1\u8282\u70b9\u5e94\u8be5\u8bbe\u7f6e\uff1a vi /usr/local/bin/calc_lic.sh # \u6bd4\u5982144\u6838\u8282\u70b9\u5e94\u8be5\u8bbe\u7f6e\uff1a vi /usr/local/bin/dyna_lic.sh \u5341\u4e94\u3001\u4f5c\u4e1a\u8ba1\u7b97\u6162\u6392\u67e5 \u00b6 1.\u9996\u5148qstat -xf \u4f5c\u4e1a\u53f7 \u67e5\u770bcomment=...\uff0c\u770b\u770b\u4f5c\u4e1a\u8dd1\u5728\u54ea\u51e0\u4e2a\u8282\u70b9\u3002 2.\u767b\u5f55\u8fd9\u51e0\u4e2a\u8282\u70b9\u67e5\u770bcpu\u8d1f\u8f7d\uff0c\u8d1f\u8f7d\u9ad8\u4f4e\u6839\u636ecpu\u6838\u6570\u5224\u65ad\uff0c\u6bd4\u5982cpu\u6838\u657040\uff0c\u90a3\u4e48\u8d1f\u8f7d\u572840\u662f\u6b63\u5e38\u7684\uff0c\u8d85\u8fc740\u8fbe\u5230\u4fe9\u500d\uff0c\u8fd9\u79cd\u5c31\u662fpbs\u8c03\u5ea6\u51fa\u4e86\u95ee\u9898\uff0cpbs\u8c03\u5ea6\u7684\u65f6\u5019\u6ca1\u6709\u5224\u65ad\u597d\u6b64\u8282\u70b9\u6b63\u5728\u8dd1\u7684\u4f5c\u4e1a\u6216\u6b8b\u7559\u7684\u4f5c\u4e1a\uff0c\u7ee7\u7eed\u628a\u65b0\u4f5c\u4e1a\u8c03\u5ea6\u4e0a\u6765\uff0c\u8fd9\u6837\u80af\u5b9a\u5c31\u6162\u4e86\u3002\u6b64\u65f6\u5230CAELNSE1\u4e0a\u7528pestat|grep \u4f5c\u4e1a\u8dd1\u7684\u8282\u70b9\uff0c\u67e5\u770b\u6b64\u4f5c\u4e1a\u8fd0\u884c\u7684\u7528\u6237\uff0c\u518d\u5230\u4f5c\u4e1a\u8dd1\u7684\u8282\u70b9\u4e0atop\u5e76killall -u \u6389\u5176\u4ed6\u7528\u6237\u7684\u4f5c\u4e1a\u3002 \u5c0f\u6280\u5de7\uff1atop\u547d\u4ee4\u663e\u793a\u7528\u6237\u540d\u4e0d\u5168\u7684\u65f6\u5019\u4f1a\u663e\u793a\u4e3axiaying+\uff0ctop\u65f6\u6309f\u8fdb\u5165\u663e\u793a\u8bbe\u7f6e\uff0c\u7a7a\u683c\u52fe\u9009uid\u9009\u9879\uff0c\u6309q\u9000\u51fa\u5373\u53ef\u663e\u793a\u7528\u6237\u7684uid\uff0c\u4e4b\u540e\u518did uid\u547d\u4ee4\u663e\u793a\u7528\u6237\u540d\u5373\u53ef\u3002 3.\uff08\u53ef\u9009\uff09\u5982\u679c\u4ee5\u4e0a\u6ca1\u6709\u67e5\u5230\u539f\u56e0\uff0c\u53ef\u8fdb\u4e00\u6b65\u6392\u67e5\uff0c\u4e0b\u7ebf\u8282\u70b9\uff0c\u5bf9\u8282\u70b9\u8fdb\u884c\u5355\u8282\u70b9\u7684linpack\u6d4b\u8bd5\u548ciozone\u6d4b\u8bd5\u3002 \u5341\u516d\u3001\u65e7\u6570\u636e\u6e05\u7406 \u00b6 \u547d\u4ee4\uff1a find /opt/altair/pbsworks/13.1/exec/thirdparty/apache/tomcat/logs/ -mtime +30 | xargs rm -rf find /gs/scratch/ -mtime +30 | xargs rm -rf find /var/spool/PBS/server_logs/ -mtime +30 | xargs rm -rf find /var/spool/PBS/mom_logs/ -mtime +30 | xargs rm -rf find /scratch/ -mtime +30 | xargs rm -rf find /var/spool/pbs/mom_logs/ -mtime +30 | xargs rm -rf \u811a\u672c\uff1a #!/bin/bash location1 = \"/gs/scratch/\" location2 = \"/scratch/\" location3 = \"/var/spool/PBS/server_logs/\" location4 = \"/var/spool/PBS/mom_logs/\" location6 = \"/var/spool/pbs/mom_logs/\" location5 = \"cd /opt/altair/pbsworks/13.1/exec/thirdparty/apache/tomcat/logs/\" #find $location1 -mtime +30 |xargs rm -rf #\u5220\u9664\u76ee\u5f55\u53ca\u6587\u4ef6 #find $location2 -mtime +30 |xargs rm -rf #\u5220\u9664\u76ee\u5f55\u53ca\u6587\u4ef6\u3002\u6240\u6709\u8ba1\u7b97\u8282\u70b9\u6267\u884c #find $location3 -mtime +30 |xargs rm -rf #\u5220\u9664\u76ee\u5f55\u53ca\u6587\u4ef6 find $location4 -mtime +30 | xargs rm -rf #\u5220\u9664\u76ee\u5f55\u53ca\u6587\u4ef6\uff0c\u6240\u6709\u8ba1\u7b97\u8282\u70b9\u6267\u884c #find $location5 -mtime +30 |xargs rm -rf #\u5220\u9664\u76ee\u5f55\u53ca\u6587\u4ef6 find $location6 -mtime +30 | xargs rm -rf #\u5220\u9664\u76ee\u5f55\u53ca\u6587\u4ef6\uff0c\u6240\u6709\u8ba1\u7b97\u8282\u70b9\u6267\u884c \u5341\u4e03\u3001\u66f4\u6539\u5e94\u7528\u63d0\u4ea4\u4f5c\u4e1a\u7684\u6700\u5927\u8fd0\u884c\u65f6\u957f \u00b6 #\u65e7\u7248pbs\u8def\u5f84 cd /var/spool/pas/repository/applications/Dyna-mpp #\u65b0\u7248pbs\u8def\u5f84 cd /var/spool/pbsworks/2020.4/access/home/data/pas/targets/localhost/repository/applications/STC-view vim submittime/presubmit.py \u6dfb\u52a0 walltime=1:00:00; \u6216\u8005\u4fee\u6539 \u5341\u516b\u3001\u67e5\u770b\u4f5c\u4e1a\u8f93\u51fa\u65e5\u5fd7 \u00b6 #\u67e5\u770b\u4f5c\u4e1a\u8f93\u51fa\u76ee\u5f55 qstat -xf \u4f5c\u4e1aid | grep stage #\u8fdb\u5165\u5230\u4f5c\u4e1a\u8f93\u51fa\u76ee\u5f55\uff08tab\u952e\u8865\u5168\uff09 cd /gs/stage/xushuang/T19C_M2EM_SpindLoad_80_0318-03-1 #\u67e5\u770b\u8f93\u51fa\u9519\u8bef\u65e5\u5fd7 cat T19C_M2EM_SpindLoad_80_0318.e318611 #\u67e5\u770b\u6807\u51c6\u8f93\u51fa\u65e5\u5fd7 cat T19C_M2EM_SpindLoad_80_0318.o318611 \u5982\u56fe\u662f\u6807\u51c6\u8f93\u51fa\u65e5\u5fd7\u7684\u5185\u5bb9\uff0c\u4e00\u822c\u60c5\u51b5\u4e2d\uff0c\u6700\u540e\u90fd\u662f\u63d0\u793a\u4f5c\u4e1a\u6b63\u5e38\u5b8c\u6210\uff0c\u53ef\u4ee5\u4e0d\u7528\u7ba1\u4e86\u3002\u4f46\u662f\u8fd9\u4e2a\u622a\u56fe\u4e0a\u9762\u62a5\u4e86\u4e00\u4e2a\u9519\uff0c\u610f\u601d\u662f\u6a21\u578b\u53d1\u751f\u81f4\u547d\u9519\u8bef\uff0c\u8fd9\u79cd\u53ef\u6839\u636e\u62a5\u9519\u5185\u5bb9\u4e2d\u7684\u63d0\u793a\u201c.out\u201d\uff0c\u6253\u5f00\u5f53\u524d\u76ee\u5f55\u4e2d.out\u6587\u4ef6\u67e5\u770b\u5177\u4f53\u8be6\u60c5\uff0c\u5982\u679c\u62a5\u9519\u662f\u5173\u4e8e\u5e94\u7528\u7684\uff0c\u5219\u622a\u56fe.out\u6587\u4ef6\u5185\u5bb9\uff0c\u8ba9\u5947\u745e\u627e\u5e94\u7528\u5382\u5546\u6392\u67e5\u3002 \u5341\u4e5d\u3001caelnse1\u4e0apbs\u65e0\u6cd5\u91cd\u542f \u00b6 \u62a5\u9519\u5982\u56fe\uff1a \u89e3\u51b3\uff1a cd /opt/pbs/bin cp qstat_18.2 qstat /etc/init.d/pbs restart cp qstat_13.1 qstat \u4e8c\u5341\u3001\u68c0\u67e5ib\u4ea4\u6362\u673a\u7aef\u53e3 \u00b6 \u547d\u4ee4\uff1aiblinkinfo \u548c ibdiagnet \u4ee5\u4e0b\u622a\u56fe\u663e\u793a\u4e86\u4ea4\u6362\u673a20\u7aef\u53e3\u62a5\u9519 \u4e8c\u5341\u4e00\u3001\u5907\u4efd\u5173\u952e\u76ee\u5f55\u548c\u6587\u4ef6 \u00b6 \u4e8c\u5341\u4e8c\u3001\u961f\u5217\u8bbe\u7f6e \u00b6 # 1\u3001\u67e5\u770b\u6240\u6709\u961f\u5217\u4fe1\u606f\uff08\u5176\u4e2d\u6709\u4e2acompute\u5bf9\u5217\uff0c\u5b83\u662f\u8def\u7531\u5bf9\u5217\uff0c\u6bcf\u6b21\u7528\u6237\u63d0\u4ea4\u4f5c\u4e1a\uff0c\u90fd\u4f1a\u5148\u627e\u8def\u7531\u5bf9\u5217\uff0c\u7136\u540e\u518d\u627e\u5230\u5bf9\u5e94\u7684\u7ec4\u5bf9\u5217\uff09 qmgr -c \"p s\" # 2\u3001\u4fee\u6539\u7ec4\u961f\u5217\u6700\u5927\u6240\u6709\u6210\u5458\u6700\u5927\u8fd0\u884c\u6838\u6570 qmgr -c \"s q CRASH max_run_res.ncpus=[o:PBS_ALL=1000]\" # 3\u3001\u7ec4\u961f\u5217\u6dfb\u52a0\u7528\u6237 qmgr -c \"s q CRASH acl_users += \u4eba\u540d\" # 4\u3001\u8def\u7531\u5bf9\u5217\u6dfb\u52a0\u7ec4\u961f\u5217\uff08\u5728\u9700\u8981\u6dfb\u52a0\u65b0\u7684\u7ec4\u5bf9\u5217\u540e\u518d\u4f7f\u7528\uff09 qmgr -c \"s q compute route_destinations += \u7ec4\u961f\u5217\u540d\" # 5\u3001\u4e3a\u67d0\u4e2a\u7528\u6237\u8bbe\u7f6e\u6700\u5927\u8fd0\u884c\u6838\u6570 qmgr -c \" s s max_run_res.ncpus+=[u:\u7528\u6237\u540d=\u6838\u6570]\" \u4e8c\u5341\u4e09\u3001\u8f66\u578b\u96c6\u6210 \u00b6 # 1.\u4fee\u6539\u6dfb\u52a0\u8f66\u578b\uff0c\u9875\u9762\u4e0a\u9ed8\u8ba4\u4ee5\u6b64\u6587\u4ef6\u987a\u5e8f\u663e\u793a\u8f66\u578b\uff0c\u5982\u679c\u6b64\u6587\u4ef6\u7b2c\u4e00\u884c\u8bbe\u7f6e\u4e3a\u7a7a\u884c\uff0c\u5219\u9875\u9762\u9ed8\u8ba4\u9009\u4e2d\u7684\u662f\u8fd9\u4e2a\u7a7a\u884c\uff0c\u663e\u793a\u4e3a\u7a7a\u767d vim /var/spool/pas/repository/model # 2.\u4fee\u6539\u6307\u5b9a\u5e94\u7528\u7684\u63d0\u4ea4\u6a21\u677f vim submittime/presubmit.py \u4ee5\u4e0b\u914d\u7f6e\u8868\u793a\u5f53\u9009\u62e9\u7a7a\u884c\u6216T21\u8f66\u578b\u65f6\uff0c\u5c06\u65e0\u6cd5\u63d0\u4ea4\uff0c\u5728web\u4e0a\u4f1a\u62a5\u9519 \u00b6 model=str(userInputs['MODEL']) if str(model).strip() == '' : sys.exit('Please select the correct vehicle!') if str(model).strip() == 'T21' : sys.exit('Please select the correct vehicle!') Tips:\u76ee\u524d\u6d89\u53ca\u7684\u8f6f\u4ef6\u6709 Abaqus-smp CrachFEM-mpp Feko Madymo-mpp Nastran-AMLS Nastran-smp Optistruct Optistruct_mmo Powerflow Preonlab Radioss StarCCM VAOne # 3.\uff08\u53ef\u9009\u505a\uff09 rmtime \u4e8c\u5341\u56db\u3001\u8c03\u6574\u4f5c\u4e1a\u4f18\u5148\u7ea7 \u00b6 # 1.\u8c03\u6574\u4f5c\u4e1a\u4f18\u5148\u7ea7 qalter -l higher = 1000 349937 higher=\u4f18\u5148\u7ea7 349937 \u4f5c\u4e1a\u53f7 # 2.\u67e5\u770b\u6240\u6709\u4f5c\u4e1a\u4f18\u5148\u7ea7\u547d\u4ee4\uff1a /opt/pbs/unsupported/pbs_stat --include-running --eval-formula #\u67e5\u770b\u6392\u961f\u4f5c\u4e1a\u4f18\u5148\u7ea7\u547d\u4ee4\uff1a /opt/pbs/unsupported/pbs_stat --eval-formula Tips\uff1a \u9047\u5230\u8fc7\u8c03\u6574\u4f18\u5148\u7ea7\u65e0\u6548\u7684\u60c5\u51b5\uff0c\u4ee5\u4e0b\u662f\u89e3\u51b3\u65b9\u5f0f(\u8c03\u6574\u8c03\u5ea6\u7b56\u7565)\uff1a vim /var/spool/PBS/sched_priv/sched_conf \u52a0\u4e00\u884c job_sort_key: \"higher HIGH\" ALL # \u4e4b\u540e\u6309\u987a\u5e8f\u6267\u884c 1 .qmgr -c \"set server scheduling =false\" 2 . cat /var/spool/pbs/sched_logs/20200429 \u67e5\u770b\u6700\u540e\u4e00\u884c\u662fLeaving Scheduling Cycle 3 . /etc/init.d/pbs status \u83b7\u53d6pbs_sched is pid 82896 4 . kill -9 82896 5 . /etc/init.d/pbs status \u786e\u8ba4pbs_sched not running 6 . /etc/init.d/pbs start ; /etc/init.d/pbs status \u68c0\u67e5pbs_sched\u6b63\u5e38\u8fd0\u884c 7 . qmgr -c \"set server scheduling = true\" \u5f00\u542f\u8c03\u5ea6 graph LR A[\u9752\u67e0\u5b66\u672f]-->B[\u535a\u4e3b] A-->C[Up\u4e3b] A-->D[\u793e\u7fa4] B-->E[\u516c\u4f17\u53f7] B-->F[\u77e5\u4e4e] C-->H[B\u7ad9] C-->I[\u8354\u679d\u5fae\u8bfe] D-->J[\u77e5\u8bc6\u661f\u7403] D-->K[\u5fae\u4fe1\u7fa4] graph TD A[\u9752\u67e0\u5b66\u672f]-->B[\u535a\u4e3b] A-->C[Up\u4e3b] A-->D[\u793e\u7fa4] B-->E[\u516c\u4f17\u53f7] B-->F[\u77e5\u4e4e] C-->H[B\u7ad9] C-->I[\u8354\u679d\u5fae\u8bfe] D-->J[\u77e5\u8bc6\u661f\u7403] D-->K[\u5fae\u4fe1\u7fa4] sequenceDiagram Alice->>+John: Hello John, how are you? Alice->>+John: John, can you hear me? John-->>-Alice: Hi Alice, I can hear you! John-->>-Alice: I feel great! stateDiagram-v2 [*] --> Still Still --> [*] Still --> Moving Moving --> Still Moving --> Crash Crash --> [*] pie title Pets adopted by volunteers \"Dogs\" : 386 \"Cats\" : 85 \"Rats\" : 15 \u5e38\u7528\u547d\u4ee4\u53ca\u8def\u5f84 \u00b6 PBS PRO\u52a8\u4f5c \u547d\u4ee4 GPFS\u52a8\u4f5c \u547d\u4ee4 \u91cd\u542fPBS /etc/init.d/pbs restart \u6574\u7406gpfs\u788e\u7247 mmdefragfs gpfsname -u 100 \u91cd\u542fPBS WORKS /etc/init.d/pbsworks restart \u67e5\u770bgpfs\u5ef6\u8fdf mmfsadm dump waiter pbs pro\u4e0a\u7ebf\u8282\u70b9 pbsnodes -c \u8282\u70b9\u540d \u68c0\u67e5\u662f\u5426\u8fd0\u884c\u5728ib\u7f51\u7edc mmfsadm test verbs status pbs pro\u4e0b\u7ebf\u8282\u70b9 pbsnodes -o \u8282\u70b9\u540d gpfs\u91cd\u542f\u524d\u65e5\u5fd7\u8def\u5f84 /var/adm/ras/mmfs.log.previous pbs\u67e5\u770b\u67d0\u4e2a\u4f5c\u4e1a qstat -xf \u4f5c\u4e1aid gpfs\u91cd\u542f\u540e\u65e5\u5fd7\u8def\u5f84 /var/adm/ras/mmfs.log.latest \u67e5\u770bpbs\u8282\u70b9\u72b6\u6001 pestat|grep -i \u8282\u70b9\u540d gpfs\u6e05\u7406\u810f\u6570\u636e\u548c\u4fee\u590d\uff08-y\u53ef\u907f\u514dyes\u95ee\u7b54\uff0c-o\u662f\u5728\u7ebf\u4e0d\u505c\u673a\u6267\u884c\uff09 mmfsck gpfsname -y -o pbs server\u65e5\u5fd7\u8def\u5f84 /var/spool/PBS/server_logs \u67e5\u770b\u78c1\u76d8\u914d\u989d\u7528\u91cf mmrepquota -a --block-size auto \u6216mmlsquota -u $USER --block-size auto pbs client\u65e5\u5fd7\u8def\u5f84 /var/spool/PBS/mom_logs \u8bbe\u7f6e\u9ed8\u8ba4\u914d\u989d\u8f6f\u786c\u9650\u5236\uff0c\u8fdb\u53bb\u7c7b\u4f3c\u4e8evim\u7f16\u8f91 mmdefedquota -u GridScaler pbs\u6dfb\u52a0\u8282\u70b9 qmgr -c \"c n \u8282\u70b9\u540d\" \u8bbe\u7f6e\u7528\u6237\u6216\u7ec4\u8f6f\u786c\u9650\u5236\u914d\u989d\uff08\u6ce8\u610f\u6570\u5b57\u4e0d\u80fd\u662f\u5c0f\u6570\uff09 mmsetquota -u fujie -s 3T -h 0 GridScaler2 pbs\u5220\u9664\u8282\u70b9 qmgr -c \"d n \u8282\u70b9\u540d\" \u5237\u65b0quota mmcheckquota -a pbs\u67e5\u770b\u8bbe\u7f6e\u4fe1\u606f qmgr -c \"p s\" \u67e5\u770b nsd \u4e0e\u5b58\u50a8\u76d8\u7684\u5bf9\u5e94\u5173\u7cfb mmlsnsd -m pbs\u67e5\u770b\u8282\u70b9\u4fe1\u606f qmgr -c \"p n \u8282\u70b9\u540d\" \u67e5\u770bnsd\u865a\u62df\u78c1\u76d8\u548cgpfs\u6587\u4ef6\u7cfb\u7edf\u4e4b\u95f4\u7684\u72b6\u6001 mmlsdisk gpfs01 pbs \u7f13\u5b58\u8def\u5f84 /gs/scratch\u548c/gs/scratch2 \u6062\u590d\u6216\u542f\u52a8\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6240\u6709nsd mmchdisk gpfs01 resume/start -a \u63d0\u4ea4\u4f5c\u4e1a qsub \u4f5c\u4e1a\u811a\u672c \u8bbe\u7f6e\u8f6f\u9650\u5236\u7684\u5bbd\u9650\u5929\u6570 mmsetquota -t 14D -u GridScaler2 \u5220\u9664\u4f5c\u4e1a qdel \u4f5c\u4e1aid \u67e5\u770b\u5feb\u7167 mmlssnapshot GridScaler \u6e05\u7406\u65e5\u5fd71 /opt/altair/pbsworks/13.1/exec/thirdparty/apache/tomcat/logs \u67e5\u770b\u5feb\u7167\u5bb9\u91cf mmlssnapshot GridScaler -d --block-size auto \u8ffd\u8e2a\u4f5c\u4e1a tracejob \u4f5c\u4e1aid \u5220\u9664\u5feb\u7167 mmdelsnapshot GridScaler snap_20191021 \u67e5\u770bib\u7f51\u7edc\u72b6\u6001 iblinkinfo \u548c ibdiagnet","title":"\u5947\u745e\u8fd0\u7ef4FAQ"},{"location":"FAQ/#faq","text":"\u5947\u745e\u8fd0\u7ef4FAQ \u96c6\u7fa4\u603b\u89c8 \u4e00\u3001\u663e\u793a\u8282\u70b9\u6253\u4e0d\u5f00\u684c\u9762\u5e94\u7528 \u4e8c\u3001\u4f5c\u4e1a\u76ee\u5f55\u62a5stale file handle\u9519\u8bef \u4e09\u3001\u4f5c\u4e1a\u5904\u4e8e\u4e00\u76f4\u6392\u961f\u6216wait\u72b6\u6001\u5982\u4f55\u5904\u7406\uff1f \u56db\u3001\u96c6\u6210\u8f6f\u4ef6\uff08starccm\u3001VAOne\uff09\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\uff08license\u3001mpi\u8fd0\u884c\u73af\u5883\u7b49\uff09\u8bf4\u660e\u3002 \u8bbe\u7f6e\u4e3a\u8d70ib\u7f51\u7edc \u8bbe\u7f6e\u4e3a\u8d70\u666e\u901a\u7f51\u7edc \u4e94\u3001\u8d44\u6e90\u6c60\u6062\u590d\u548c\u5220\u9664 \u516d\u3001server\u8282\u70b9df -h\u5361\u4f4f \u4e03\u3001\u4f5c\u4e1a\u63d0\u4ea4\u5931\u8d25 \u516b\u3001\u63d0\u4ea4\u4f5c\u4e1a\u811a\u672c \u4e5d\u3001\u66ff\u6362altair\u7684license \u5341\u3001\u96c6\u6210\u8f6f\u4ef6\uff08\u4fee\u6539\u914d\u7f6e\uff09 \u5341\u4e00\u3001web\u9875\u9762\u65e0\u6cd5\u63d0\u4ea4\u4f5c\u4e1a\u6216\u63d0\u4ea4\u4f5c\u4e1a\u63d0\u793aUnknown.zac(Unknown Source)\u7b49\u9519\u8bef \u5341\u4e8c\u3001nastran-smp\u4f5c\u4e1a\u65e0\u6cd5\u8ba1\u7b97\u6210\u529f\uff0c\u4e00\u76f4\u5904\u4e8e\u8ba1\u7b97\u4e2d \u5c06\u622a\u56fe\u6240\u793a\u590432\u4fee\u6539\u621016\uff0c\u4fee\u6539\u5b8c\u65e0\u9700\u91cd\u542f\u670d\u52a1\uff0c\u91cd\u65b0\u63d0\u4ea4\u4f5c\u4e1a\u5373\u53ef \u5341\u4e09\u3001altair\u8f6f\u4ef6\u5b89\u88c5 \u5341\u56db\u3001dyna license\u66ff\u6362 \u5341\u4e94\u3001\u4f5c\u4e1a\u8ba1\u7b97\u6162\u6392\u67e5 \u5341\u516d\u3001\u65e7\u6570\u636e\u6e05\u7406 \u5341\u4e03\u3001\u66f4\u6539\u5e94\u7528\u63d0\u4ea4\u4f5c\u4e1a\u7684\u6700\u5927\u8fd0\u884c\u65f6\u957f \u5341\u516b\u3001\u67e5\u770b\u4f5c\u4e1a\u8f93\u51fa\u65e5\u5fd7 \u5341\u4e5d\u3001caelnse1\u4e0apbs\u65e0\u6cd5\u91cd\u542f \u4e8c\u5341\u3001\u68c0\u67e5ib\u4ea4\u6362\u673a\u7aef\u53e3 \u4e8c\u5341\u4e00\u3001\u5907\u4efd\u5173\u952e\u76ee\u5f55\u548c\u6587\u4ef6 \u4e8c\u5341\u4e8c\u3001\u961f\u5217\u8bbe\u7f6e \u4e8c\u5341\u4e09\u3001\u8f66\u578b\u96c6\u6210 \u4ee5\u4e0b\u914d\u7f6e\u8868\u793a\u5f53\u9009\u62e9\u7a7a\u884c\u6216T21\u8f66\u578b\u65f6\uff0c\u5c06\u65e0\u6cd5\u63d0\u4ea4\uff0c\u5728web\u4e0a\u4f1a\u62a5\u9519 \u4e8c\u5341\u56db\u3001\u8c03\u6574\u4f5c\u4e1a\u4f18\u5148\u7ea7 \u5e38\u7528\u547d\u4ee4\u53ca\u8def\u5f84","title":"\u5947\u745e\u8fd0\u7ef4FAQ"},{"location":"FAQ/#_1","text":"\u60e0\u666e\u7ba1\u7406\u8282\u70b9\uff1aCAELNSE1\\2 \uff08\u7528\u7684\u60e0\u666eCMU\u8fdb\u884c\u7cfb\u7edf\u5206\u53d1\uff0c\u514b\u9686\uff09 \u8ba1\u7b97\u8282\u70b9\uff1aCAEOPE01-82 GPFS server\uff1aCAESNS01\\02 PBS pro + PBS WORKS\uff1aCAELNSE1 \u524d\u540e\u5904\u7406\u8282\u70b9\uff08\u663e\u793a\u8282\u70b9\uff09\uff1aCAEGNS01\u300102\u300103\u300104\u300105\u300106\u300107 \u7528\u6237\u7ba1\u7406NIS server\uff1aCAELNSE1 \u5176\u4ed6\u8bf4\u660e\uff1a\u6240\u6709\u8282\u70b9\u914d\u7f6e\u4e86nfs + autofs\uff08\u7ba1\u7406\u8282\u70b9\u4f1a\u6302\u8f7d\u6240\u6709\u8282\u70b9\uff0c\u8ba1\u7b97\u8282\u70b9\u4f1a\u6839\u636e\u4f5c\u4e1a\u8c03\u5ea6\u5230\u54ea\u51e0\u53f0\uff0c\u5728\u54ea\u51e0\u53f0\u8fdb\u884c\u76f8\u5e94\u8282\u70b9\u7684\u6302\u8f7d\uff09 /etc/exports /etc/auto.master /etc/auto.pbs","title":"\u96c6\u7fa4\u603b\u89c8"},{"location":"FAQ/#_2","text":"\u73b0\u8c61 \uff1a \u6253\u5f00\u56fe\u5f62\uff0c\u65e0\u6cd5\u8fdb\u5165\u56fe\u5f62\u684c\u9762\uff0c\u5e76\u81ea\u52a8\u52a0\u8f7d\u5e94\u7528 \u6392\u67e5\uff1a 1.\u901a\u8fc7\u9875\u9762Altair Compute Manager\u767b\u5f55pbsadmin/1qaz2wsx\uff0c\u63d0\u4ea4\u4e00\u4e2a\u56fe\u5f62\u4f5c\u4e1a 2.\u8fdb\u5165\u76d1\u63a7\uff0c\u9009\u4e2d\u63d0\u4ea4\u7684\u4f5c\u4e1a\uff0c\u70b9\u51fb\u56fe\u5f62\uff0c\u67e5\u770b\u4e0b\u65b9\u7684\u8ba1\u7b97\u8282\u70b9 3.\u547d\u4ee4\u884csu - pbsadmin\uff0c\u5e76ssh\u5230\u4e0a\u9762\u7684\u8ba1\u7b97\u8282\u70b9\uff0c\u672c\u6b21\u6848\u4f8b\u4e2d\u4f1a\u51fa\u73b0\u6b64\u8fc7\u7a0b\u975e\u5e38\u7f13\u6162\uff0c\u8003\u8651\u662fgpfs\u5e76\u884c\u6587\u4ef6\u7cfb\u7edf\u5b58\u5728\u5f02\u5e38\u3002 4.\u5229\u7528\u547d\u4ee4mmfsadm dump waiter \u68c0\u67e5gpfs\u6587\u4ef6\u7cfb\u7edf\u5ef6\u8fdf\u60c5\u51b5\uff0c\u4ee5\u4e0b\u662f\u622a\u56fe\u8be6\u89e3 5.\u8054\u7cfb\u7528\u6237\u5c1d\u8bd5\u91cd\u542f\u5ef6\u8fdf\u7684\u8282\u70b9\uff0c\u91cd\u542f\u540e\u68c0\u67e5\u3002\u672c\u6848\u4f8b\u6700\u7ec8\u6392\u67e5\u5230gpfs server02\u8282\u70b9\u5ef6\u8fdf\u5f88\u5927\uff0c\u91cd\u542f\u540e\u8fd8\u662f\u5ef6\u8fdf\uff0c\u4f46\u684c\u9762\u53ef\u4ee5\u6253\u5f00\u4e86\uff0c\u8ba9\u5ba2\u6237\u8054\u7cfb\u5b58\u50a8\u786c\u4ef6\u5de5\u7a0b\u5e08\u68c0\u67e5\u4e00\u4e0b\u5b58\u50a8\u94fe\u8def\u662f\u5426\u6b63\u5e38\u3002","title":"\u4e00\u3001\u663e\u793a\u8282\u70b9\u6253\u4e0d\u5f00\u684c\u9762\u5e94\u7528"},{"location":"FAQ/#stale-file-handle","text":"\u62a5\u9519\u622a\u56fe\uff1a \u95ee\u9898\u5206\u6790\uff1a \u4ece\u62a5\u9519\u622a\u56fe\u53ef\u4ee5\u770b\u5230\u4f5c\u4e1a\u5230\u5171\u4eab\u76ee\u5f55\u51fa\u73b0\u9519\u8bef\uff0c\u51fa\u9519\u7684\u8282\u70b9\u5206\u522b\u4e3acaeope56\u3001caeope57\u3001caeope60\u3002\u8bf4\u660e\u5f53\u65f6\u8fd9\u4e09\u4e2a\u8282\u70b9gpfs\u6302\u8f7d\u51fa\u73b0\u95ee\u9898\uff0c\u6b64\u65f6\u53ef\u5148ssh\u5230\u4e09\u4e2a\u8282\u70b9\u4e0adf -h\u770b\u4e0b\u5b58\u50a8\u8fd8\u5728\u4e0d\u5728\uff0c\u518d\u5230CAESNS01\u8282\u70b9\u4e0a\u67e5\u770bgpfs\u65e5\u5fd7\uff0c\u6700\u540e\u5230\u5404\u95ee\u9898\u8282\u70b9\u4e0a\u770bgpfs\u65e5\u5fd7\uff0c\u7efc\u5408\u53cc\u65b9\u65e5\u5fd7\u8fdb\u884c\u5206\u6790\u3002 \u95ee\u9898\u89e3\u51b3\uff1a \u5148\u8bf4\u660e\u4e00\u4e0b\uff0cgpfs\u65e5\u5fd7\u4e3b\u8981\u5173\u6ce8\u4fe9\u4e2a\uff0c\u4e00\u4e2a\u662fgpfs\u91cd\u542f\u524d\u7684\u65e5\u5fd7\uff0c\u5373/var/adm/ras/mmfs.log.previous\uff0c\u4e00\u4e2a\u662fgpfs\u91cd\u542f\u540e\u7684\u65e5\u5fd7\uff0c\u5373/var/adm/ras/mmfs.log.latest\u3002\u8fd9\u91cc\u53ef\u4ee5\u5148\u5230CAESNS01\u8282\u70b9\u4e0a\u67e5\u770bgpfs\u65e5\u5fd7\uff0c\u7528\u547d\u4ee4cat /var/adm/ras/mmfs.log.latest |grep -i caeope60\uff0c\u5173\u6ce8\u95ee\u9898\u51fa\u73b0\u65f6\u95f4\u70b9\u548c\u5185\u5bb9\uff0c \u518dssh\u5230\u95ee\u9898\u8282\u70b9\uff0c\u901a\u8fc7gpfs\u65e5\u5fd7\u67e5\u5230gpfs\u91cd\u542f\u7684\u65f6\u95f4\u70b9\uff0c\u7136\u540e\u6839\u636e\u65f6\u95f4\u70b9\u518d\u53bb\u67e5Linux\u7cfb\u7edf\u5728\u90a3\u4e2a\u65f6\u95f4\u70b9\u662f\u4e0d\u662f\u6709\u95ee\u9898\uff0cLinux\u7cfb\u7edf\u65e5\u5fd7\u5728/var/log/messages\u3002\u672c\u6848\u4f8b\u6700\u7ec8\u67e5\u5230\u662f\u7528\u6237\u63d0\u4ea4\u7684\u4f5c\u4e1a\u6a21\u578b\u8fc7\u5927\u9020\u6210\u5185\u5b58\u6ea2\u51fa\u5bfc\u81f4gpfs\u91cd\u542f\u3002","title":"\u4e8c\u3001\u4f5c\u4e1a\u76ee\u5f55\u62a5stale file handle\u9519\u8bef"},{"location":"FAQ/#wait","text":"1\u3001\u5982\u679c\u4f5c\u4e1a\u662f\u6392\u961f\u72b6\u6001\uff0c\u5219\u53ef\u80fd\u662f\u6b63\u5e38\u7684\u4e5f\u53ef\u80fd\u662f\u4e0d\u6b63\u5e38\u7684\uff1b\u5982\u679c\u4f5c\u4e1a\u5904\u4e8ewait\u72b6\u6001\uff0c\u5219\u4e00\u5b9a\u662f\u4e0d\u6b63\u5e38\u7684\u3002 2\u3001PBS\u548clsf\u4e00\u6837\uff0c\u4e5f\u5206\u4e3aserver\u7aef\u548cclient\u7aef\uff0c\u5947\u745epbs\u7684server\u7aef\u5728 CAELNSE1 \u8282\u70b9\uff0c\u4f5c\u4e1a\u901a\u8fc7web\u9875\u9762\u63d0\u4ea4\uff0c\u5982\u56fe\uff1a \u4f5c\u4e1a\u63d0\u4ea4\u5230\u5b8c\u6210\u6d41\u7a0b\uff1a\u4f5c\u4e1a\u88ab\u7528\u6237\u63d0\u4ea4\u540e\u2192server\u7aef\u6839\u636e\u63d0\u4ea4\u7684\u4fe1\u606f\u5206\u914d\u8ba1\u7b97\u8282\u70b9\u2192server\u7aefscp source\u6587\u4ef6\u5230\u8ba1\u7b97\u8282\u70b9\uff08\u5305\u62eclicense\u4fe1\u606f\u7b49\uff09\u2192\u8ba1\u7b97\u8282\u70b9\u5f00\u59cb\u8ba1\u7b97\u2192\u8ba1\u7b97\u5b8c\u6210\u540e\u590d\u5236\u5230\u672c\u5730\u7f13\u5b58\uff08\u591a\u4e2a\u8282\u70b9\u4e4b\u95f4\u901a\u8fc7autonfs\u5171\u4eab\u7f13\u5b58\u76ee\u5f55\uff09\u2192\u6700\u540e\u5c06\u8ba1\u7b97\u7ed3\u679cscp\u5230gpfs\u5171\u4eab\u76ee\u5f55\u3002 3\u3001\u4e00\u76f4wait\u72b6\u6001\u539f\u56e0\uff1a\u5927\u591a\u6570\u662f\u7531\u4e8e\u201cserver\u7aefscp source\u6587\u4ef6\u5230\u8ba1\u7b97\u8282\u70b9\uff08\u5305\u62eclicense\u4fe1\u606f\u7b49\uff09\u201d\u8fd9\u4e00\u6b65\u51fa\u9519\uff0c\u901a\u8fc7\u5728server\u8282\u70b9CAELNSE1\u67e5\u770b\u65e5\u5fd7 /var/spool/PBS/server_logs\uff08server\u65e5\u5fd7\u770bserver_logs\uff0c\u8ba1\u7b97\u65e5\u5fd7\u770bmom_logs\uff09/20201118\uff08\u65e5\u671f\uff09 \u5224\u65ad\uff0c scp\u5931\u8d25\u53ef\u80fd\u539f\u56e0\uff1a \u2460\u8282\u70b9\u6ca1\u505a\u4e92\u4fe1\uff08\u7528\u7528\u6237\u8d26\u53f7ssh\u8bd5\u8bd5\uff0c\u8fd8\u6709\u5c31\u662f\u7528\u6237\u7b2c\u4e00\u6b21\u767b\u9646\u63d0\u793ayes/no\u4e5f\u4f1a\u5f71\u54cd\uff09 \u2461\u88ab\u62f7\u8d1d\u7684\u8ba1\u7b97\u8282\u70b9down\u673a \u2462gpfs\u6216autofs\u6545\u969c \u2463\u8fd8\u6709\u53ef\u80fd\u662f\u7528\u6237\u63d0\u4ea4\u7684\u4f5c\u4e1a\u6570\u636e\u91cf\u592a\u5927\uff0c\u672c\u5730/scratch\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u53ef\u4ee5df -h\u67e5\u770b\u8282\u70b9/\u76ee\u5f55\u4f7f\u7528\u7387\uff0c\u6b64\u65f6\u5efa\u8bae\u7528\u6237\u628a\u4f5c\u4e1a\u63d0\u4ea4\u5230\u672c\u5730\u78c1\u76d8\u66f4\u5927\u7684\u8282\u70b9\u8ba1\u7b97\u6216\u8005\u6307\u5b9ascratch \u76ee\u5f55\u4e3a/gs/scratch\u76ee\u5f55\u3002\u4e4b\u540e\u518d\u65f6\u5220\u9664/scratch/\u76ee\u5f55\u4e2d\u4f5c\u4e1a\u5931\u8d25\u6b8b\u7559\u7684\u76ee\u5f55\u3002 4\u3001\u4e00\u76f4\u6392\u961fq\u72b6\u6001\u539f\u56e0\uff1a 1\uff09\u5148\u6839\u636e\u4f5c\u4e1a\u53f7\u68c0\u67e5\u539f\u56e0 qstat -fx \u4f5c\u4e1aid #\u6839\u636eid\u67e5\u770b\u4f5c\u4e1a\u8be6\u7ec6\u4fe1\u606f pestat|grep -i \u8282\u70b9\u540d #\u67e5\u770b\u67d0\u4e2a\u8282\u70b9\u7684\u4f5c\u4e1a\u4fe1\u606f\uff08id\u3001\u7528\u6237\u3001platform\u3001\u72b6\u6001\u7b49\uff09 2\uff09\u5982\u679c\u663e\u793a\u5173\u6ce8comment\u72b6\u6001\uff0c\u6b64\u79cd\u60c5\u51b5\u662f\u8282\u70b9\u8d44\u6e90\u4e0d\u591f\u5bfc\u81f4\uff0c\u8ba9\u7528\u6237\u7b49\u5f85\u5373\u53ef\u3002 3\uff09\u5982\u679c\u4e0d\u662f\u4ee5\u4e0a\u539f\u56e0\u5bfc\u81f4\uff0c\u5219\u53ef\u80fd\u662f\u7531\u4e8e\u201cserver\u7aefscp source\u6587\u4ef6\u5230\u8ba1\u7b97\u8282\u70b9\uff08\u5305\u62eclicense\u4fe1\u606f\u7b49\uff09\u201d\u8fd9\u4e00\u6b65\u51fa\u9519\uff0c\u901a\u8fc7\u5728server\u8282\u70b9CAELNSE1\u67e5\u770b\u65e5\u5fd7 /var/spool/PBS/server_logs\uff08server\u65e5\u5fd7\u770bserver_logs\uff0c\u8ba1\u7b97\u65e5\u5fd7\u770bmom_logs\uff09/20201118\uff08\u65e5\u671f\uff09 \u5224\u65ad\uff0c scp\u5931\u8d25\u53ef\u80fd\u539f\u56e0\uff1a \u2460\u8282\u70b9\u6ca1\u505a\u4e92\u4fe1 \u2461\u88ab\u62f7\u8d1d\u7684\u8ba1\u7b97\u8282\u70b9down\u673a \u2462gpfs\u6216autofs\u6545\u969c","title":"\u4e09\u3001\u4f5c\u4e1a\u5904\u4e8e\u4e00\u76f4\u6392\u961f\u6216wait\u72b6\u6001\u5982\u4f55\u5904\u7406\uff1f"},{"location":"FAQ/#starccmvaonelicensempi","text":"\u56e0\u4e3apbs\u4e2d\u8f6f\u4ef6\u90fd\u662f\u96c6\u6210\u5230web\u754c\u9762\u4e0a\uff0cweb\u754c\u9762\u662f\u7531/var/spool/pas\u76ee\u5f55\u4e0b\u7684\u914d\u7f6e\u6587\u4ef6\u63a7\u5236\uff0c\u6240\u4ee5\u672c\u6848\u4f8b\u4e2dVAOne\u8f6f\u4ef6\u76f8\u5173\u914d\u7f6e\u6587\u4ef6\u4e5f\u5728\u6b64\u76ee\u5f55\u4e0b\u3002 cd /var/spool/pas/repository/applications cd VAOne/runtime vim start.sh license\u76f8\u5173 \uff1a export CDLMD_LICENSE_FILE=/gs/apps/CCM1406/ccm1406R8license.dat mpi\u76f8\u5173\uff1a","title":"\u56db\u3001\u96c6\u6210\u8f6f\u4ef6\uff08starccm\u3001VAOne\uff09\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\uff08license\u3001mpi\u8fd0\u884c\u73af\u5883\u7b49\uff09\u8bf4\u660e\u3002"},{"location":"FAQ/#ib","text":"export MPIRUN_OPTIONS=\"-v -IBV -cpu_bind -e MPI_IB_PKEY=0x8df1,0x7fff\"","title":"\u8bbe\u7f6e\u4e3a\u8d70ib\u7f51\u7edc"},{"location":"FAQ/#_3","text":"export MPIRUN_OPTIONS=\"-v -TCP -cpu_bind\" \u4e4b\u540e\u8fdb\u5165cd /var/spool/pas/repository rm -rf time_stamp.txt","title":"\u8bbe\u7f6e\u4e3a\u8d70\u666e\u901a\u7f51\u7edc"},{"location":"FAQ/#_4","text":"\u793a\u4f8b\uff1a49\u8282\u70b9CPU\u66f4\u6362\u540e\uff0c\u9700\u8981\u8c03\u6574\u4e0b\u8d44\u6e90\u6c60\uff0c\u6b63\u5e38\u6295\u5165\u4f7f\u7528\uff1f \u6062\u590d\u8282\u70b9\u8d44\u6e90\u6c60\uff1a 1.\u67e5\u770b\u8282\u70b9\u5f53\u524d\u8d44\u6e90\u6c60\u540d\u79f0\u3002\uff08\u6b64\u6b65\u53ef\u9009\uff09 pestat|grep -i caeope49 2.\u67e5\u770b\u8282\u70b9\u8d44\u6e90\u6c60\u548c\u5176\u4ed6\u4fe1\u606f\u3002\uff08\u6b64\u6b65\u53ef\u9009\uff09 qmgr -c \"p n CAEOPE49\" qmgr -c \"p n CAEOPE50\" 3.\u8c03\u6574\u8282\u70b9\u8d44\u6e90\u6c60 qmgr -c \"set node CAEOPE49 resources_available.platform = E52667-16c-256G\" 4.\u628a\u8f6f\u4ef6\u96c6\u6210\u5230\u8d44\u6e90\u6c60(\u8d44\u6e90\u6c60\u4e2d\u7684\u6240\u6709\u8282\u70b9\u90fd\u8981\u4e00\u4e2a\u4e00\u4e2a\u6dfb\u52a0) qmgr -c \"set node CAEOPE49 resources_available.pas_applications_enabled += Dyna-mmp\" qmgr -c \"set node CAEOPE50 resources_available.pas_applications_enabled += Dyna-mmp\" ... 5.\u628a\u8f6f\u4ef6\u8d44\u6e90\u6c60\u6dfb\u52a0\u5230xml\u6a21\u677f cd /var/spool/pas/repository/applications/ cd Dyna-mmp/ vim app-inp-Dyna-mmp.xml 6.\u68c0\u67e5\u8f6f\u4ef6\u63d0\u4ea4\u6a21\u677f\u914d\u7f6e vim Dyna-mpp/submittime/presubmit.py 7.\u68c0\u67e5\u8f6f\u4ef6\u662f\u5426\u52a0\u5165\u5230\u8d44\u6e90\u6c60\u5176\u4ed6\u914d\u7f6e\u6587\u4ef6\u4e2d vim /var/spool/PBS/server_priv/resourcedef nastran type=long \u68c0\u67e5\u662f\u5426\u6709\u6b64\u884c\uff0c\u6ca1\u6709\u5219\u6309\u6b64\u683c\u5f0f\u6dfb\u52a0\uff1a\u8f6f\u4ef6\u540d type=long vim /var/spool/PBS/sched_priv/sched_config \u68c0\u67e5\u8fd9\u91cc\u662f\u5426\u6709\u65b0\u8f6f\u4ef6\u540d\uff0c\u6ca1\u6709\u5219\u6dfb\u52a0 7.\u67e5\u770b\u8d44\u6e90\u6c60\u8c03\u6574\u540e\u4fe1\u606f qmgr -c \"p n CAEOPE49\" \u5220\u9664\u8d44\u6e90\u6c60\uff1a 1.\u8fdb\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55 cd /var/spool/pas/repository/applications/ cd Abaqus-smp/ 2.\u7f16\u8f91xml\u6587\u4ef6\uff0c\u6ce8\u91ca\u6216\u5220\u9664 vim app-inp-Abaqus-smp.xml 3.\u5220\u9664\u8f6f\u4ef6\u8d44\u6e90\u6c60(\u8d44\u6e90\u6c60\u4e2d\u7684\u6240\u6709\u8282\u70b9\u90fd\u8981\u4e00\u4e2a\u4e00\u4e2a\u5220\u9664) qmgr -c \"set node CAEOPE49 resources_available.pas_applications_enabled -= Dyna\" qmgr -c \"set node CAEOPE50 resources_available.pas_applications_enabled -= Dyna\" ... 4.\u6700\u540e\u79fb\u52a8\u6587\u4ef6\u5230tmp\u76ee\u5f55\u6216\u5220\u9664time\u6587\u4ef6 cd /var/spool/pas/repository mv time_stamp.txt /tmp/","title":"\u4e94\u3001\u8d44\u6e90\u6c60\u6062\u590d\u548c\u5220\u9664"},{"location":"FAQ/#serverdf-h","text":"\u5927\u591a\u6570\u60c5\u51b5\u662f\u67d0\u4e2a\u8282\u70b9\u65e0\u6cd5ssh\uff0cnfs\u6302\u8f7d\u51fa\u95ee\u9898\u4e86\uff0c\u5f3a\u884c\u5378\u8f7d\u95ee\u9898\u8282\u70b9\u7684nfs\u5373\u53ef\u3002 umount -l /pbs/CAEOPE25 PS\uff1a\u90a3\u4e48\u5982\u4f55\u77e5\u9053\u662f\u54ea\u4e2a\u8282\u70b9\u6302\u4e86\u5462\uff1f\u4fe9\u4e2a\u65b9\u6cd5\u53ef\u4ee5\u627e\u5230\uff1a 1.\u901a\u8fc7\u547d\u4ee4pestat|grep -i down\u67e5\u627edown\u673a\u7684\u8282\u70b9 2.\u7b2c\u4e00\u79cd\u5982\u679c\u6ca1\u627e\u5230\uff0c\u5c31\u7528\u7b2c\u4e8c\u79cd\u67e5\u627e\uff0c\u547d\u4ee4\u4e3a shell strace df -h","title":"\u516d\u3001server\u8282\u70b9df -h\u5361\u4f4f"},{"location":"FAQ/#_5","text":"\u7b2c\u4e00\u79cd\uff1a\u53ef\u4ee5\u901a\u8fc7qstat -xf 297766|grep stage\u67e5\u770b\u8f93\u51fa\u76ee\u5f55\uff0c\u8fdb\u5165\u8f93\u51fa\u76ee\u5f55\u4e2d\u67e5\u770b\u65e5\u5fd7 \u7b2c\u4e8c\u79cd\uff1a\u901a\u8fc7\u56fe\u5f62\u754c\u9762\u67e5\u770b\u8f93\u51fa\u65e5\u5fd7 \u534e\u4e3a\u4e91\u73af\u5883\u4e2d\u63d0\u4ea4\u591a\u8282\u70b9\u4f5c\u4e1a\u62a5\u9519\u89e3\u51b3\uff1a touch /etc/profile.d/mpi.sh echo \"export MPI_IB_PKEY=0x8df1,0x7fff\" > /etc/profile.d/mpi.sh","title":"\u4e03\u3001\u4f5c\u4e1a\u63d0\u4ea4\u5931\u8d25"},{"location":"FAQ/#_6","text":"#!/bin/bash #PBS -l nodes=1:ppn=16:ngpus=1:platform=E52667-16c-256G #PBS -N test #env > env.out sleep 100 /gs/CAE/STR/NASTRAN/2013/bin/nast20131 T19C_M1EM_unitload_gaijin1_cewei_20210112.bdf parallel = 16 memory = 120gb #\u5bf9\u4e8e\u7a0b\u5e8f\u7684\u547d\u4ee4\uff0c\u53ef\u4ee5\u5728out\u6587\u4ef6\u4e2d\u627e\u5230 \u811a\u672c\u8bf4\u660e\uff1anodes\u5b9a\u4e49\u8282\u70b9\u6570\uff1bppn\u5b9a\u4e49\u5355\u53f0\u8282\u70b9\u4f7f\u7528\u7684\u6700\u5927\u6838\u6570\uff1bngpus\u5b9a\u4e49\u5355\u53f0gpu\u8282\u70b9\u4f7f\u7528\u7684\u6700\u5927gpu\u6838\u6570\uff1bplatform\u5b9a\u4e49\u63d0\u4ea4\u5230\u7684\u8d44\u6e90\u6c60\uff08\u6ce8\u610f\u8d44\u6e90\u6c60\u540d\u79f0\u53ea\u5305\u542bCPU\u578b\u53f7-CPU\u6838\u6570-\u5185\u5b58\u5927\u5c0f\uff09\uff1btest\u5b9a\u4e49\u4f5c\u4e1a\u540d qsub < *.sh","title":"\u516b\u3001\u63d0\u4ea4\u4f5c\u4e1a\u811a\u672c"},{"location":"FAQ/#altairlicense","text":"altair\u7684license\u683c\u5f0f\u4e00\u822c\u4e3a\uff1aALCH_CHAU_20210210_526858.dat \u66ff\u6362\u6b65\u9aa4\uff1a #1\u3001\u8fdb\u5165license\u76ee\u5f55\uff0c\u5e76\u5c06license\u4f20\u8fdb\u6765 cd /usr/local/altair/licensing13.2/ #2\u3001\u7ed9license\u6267\u884c\u6743\u9650 chmod +x ALCH_CHAU_20210210_526858.dat #3\u3001\u7f16\u8f91license\u6240\u5728\u8def\u5f84\u7684\u914d\u7f6e\u6587\u4ef6 vim ltair-serv.cfg #4\u3001\u91cd\u542faltair\u670d\u52a1 /etc/init.d/altairlmxd restart #5\u3001\u91cd\u542fpbs\u670d\u52a1 /etc/init.d/pbs restart \u7b2c\u4e94\u6b65\u8fd9\u91cc\u53ef\u80fd\u51fa\u73b0\u62a5\u9519\u5982\u4e0b\uff1a \u8fd9\u65f6\u5019\u9700\u8981\u4fee\u6539pbs\u6267\u884c\u8fdb\u7a0b\u4e3a\u5bf9\u5e94\u7248\u672c\u540e\u518d\u91cd\u542f which qstat cd /opt/pbs/bin/ cp qstat.18 qstat /etc/init.d/pbs restart \u4e4b\u540e\u518d\u4fee\u6539\u56de\u6765\u91cd\u542fpbsworks cp qstat.13 qstat #6\u3001\u91cd\u542fpbsworks /etc/init.d/pbsworks restart #7\u3001\u67e5\u770blicense\u4fe1\u606f /usr/local/altair/licensing13.2/bin/almutil -licstat -host mgt -port 6200 \u5982\u56fe\u80fd\u770b\u5230license\u5230\u671f\u65f6\u95f4\u5219\u8bf4\u660e\u66ff\u6362\u6210\u529f","title":"\u4e5d\u3001\u66ff\u6362altair\u7684license"},{"location":"FAQ/#_7","text":"\u5927\u81f4\u6d41\u7a0b\uff1a \u65b9\u5f0f\u4e00\uff1a\u5df2\u96c6\u6210\u8fc7\u7684\u8f6f\u4ef6\uff0c\u65b0\u589e\u7248\u672c\uff1a 1\u3001\u4fee\u6539site-config.xml \u6587\u4ef6 2\u3001rmtime \u65b9\u5f0f\u4e8c\uff1a\u65b0\u589e\u8f6f\u4ef6\u96c6\u6210\uff1a 1\u3001\u4fee\u6539site-config.xml \u6587\u4ef6 2\u3001copy application/appsname #\u627e\u4e00\u4e2a\u548c\u65b0\u96c6\u6210\u5e94\u7528\u53c2\u6570\u63a5\u8fd1\u7684\u65e7\u5e94\u7528\u6a21\u677f\uff0c\u53ef\u4ee5\u901a\u8fc7web\u9875\u9762\u8f6f\u4ef6\u5217\u8868\u4e00\u4e2a\u4e2a\u70b9\u5f00\u5bf9\u6bd4\u3002 3\u3001\u4fee\u6539runtime/start.sh \u6216 runtime/start.py #\u4e3b\u8981\u662f\u4fee\u6539\u4f5c\u4e1a\u63d0\u4ea4\u7684\u4e00\u4e9b\u547d\u4ee4\uff0c\u6b64\u811a\u672c\u4e2d\u7684\u5185\u5bb9\u627e\u8c01\u5b89\u88c5\u8f6f\u4ef6\u7684\u8c01\u6709\u3002\uff08\u8fd9\u91ccsh\u6216py\u7684\u9009\u62e9\u6839\u636e\u914d\u7f6eapp-conv-StarCCM.xml: runtime/start.sh \u4e2d\u7684\u6307\u5411\u51b3\u5b9a\uff09 4\u3001\u4fee\u6539submittime/presubmit.py #(\u53ef\u9009)\u6b64\u811a\u672c\u7528\u6765\u4fee\u6539\u9488\u5bf9\u8d44\u6e90\u6c60\u7684\u4e00\u4e9b\u7279\u5b9a\u4f7f\u7528\u89c4\u5219\uff0c\u6bd4\u5982\u4e0d\u901a\u8d44\u6e90\u6c60\u8bbe\u7f6e\u5bf9\u5e94\u7684cpu\u6838\u6570\uff0c\u6309\u9700\u8bbe\u7f6e\u76f8\u5e94\u7684\u4f5c\u4e1a\u8fd0\u884c\u65f6\u95f4\u7b49\u3002 5\u3001\u4fee\u6539app-actions-StarCCM.xml app-conv-StarCCM.xml app-inp-StarCCM.xml runtime/start.sh \u6216 runtime/start.py submittime/presubmit.py \u4e94\u4e2a\u914d\u7f6e\u6587\u4ef6\u91cc\u9762\u6709\u5173\u8f6f\u4ef6\u540d\u53c2\u6570\u5168\u90e8\u66ff\u6362\u6210\u8981\u96c6\u6210\u7684\u65b0\u8f6f\u4ef6\u540d\uff0c\u540c\u65f6\u4fee\u6539app-actions-StarCCM.xml app-conv-StarCCM.xml app-inp-StarCCM.xml \u4e09\u4e2a\u6587\u4ef6\u540d\u4e3a\u65b0\u8f6f\u4ef6\u540d\u3002 6\u3001\u4fee\u6539license\u83b7\u53d6\u811a\u672c 7\u3001\u4fee\u6539/var/spool/PBS/server_priv/resourcedef #\u5173\u4e8elicense\u914d\u7f6e\uff0c\u5982\u679clicense\u662f\u65e0\u9650\u70b9\u6570\uff0c\u8fd9\u91cc\u4e0d\u7528\u4fee\u6539\uff0c\u4fee\u6539\u53c2\u8003word\uff1aD:\\cyrus\\\u5965\u5de5\u79d1\u6280\\\u9879\u76ee\u6c47\u603b\\\u5947\u745e\uff08\u8fd0\u7ef4\uff09\\pbs license\u8c03\u5ea6.docx 8\u3001\u4fee\u6539/var/spool/PBS/sched_priv/sched_config #\u5173\u4e8elicense\u914d\u7f6e\uff0c\u5982\u679clicense\u662f\u65e0\u9650\u70b9\u6570\uff0c\u8fd9\u91cc\u4e0d\u7528\u4fee\u6539\uff0c\u4fee\u6539\u53c2\u8003word\uff1aD:\\cyrus\\\u5965\u5de5\u79d1\u6280\\\u9879\u76ee\u6c47\u603b\\\u5947\u745e\uff08\u8fd0\u7ef4\uff09\\pbs license\u8c03\u5ea6.docx \u8bf4\u660e\uff1a\u914d\u7f6e\u6587\u4ef6\u548c\u6a21\u677f\u5b58\u653e\u76ee\u5f55\u5728\u65e7\u7248pbs\u548c\u65b0\u7248pbs\u4e2d\u4e0d\u4e00\u6837\u3002 \u65e7\u7248PBS: \u6a21\u677f\u5b58\u653e\u4f4d\u7f6e:/var/spool/pas/repository/applications \u914d\u7f6e\u6587\u4ef6\u5b58\u653e\u4f4d\u7f6e\uff1a/var/spool/pas/repository/site-config.xml \u65b0\u7248PBS: \u6a21\u677f\u5b58\u653e\u4f4d\u7f6e\uff1a/var/spool/pbsworks/2020.4/access/home/data/pas/targets/localhost/repository/applications/ \u914d\u7f6e\u6587\u4ef6\u5b58\u653e\u4f4d\u7f6e\uff1a/var/spool/pbsworks/2020.4/access/home/data/pas/targets/localhost/repository/site-config.xml \u4fee\u6539\u6b65\u9aa4\uff1a 1.\u628a\u6a21\u677f\u653e\u7f6e\u4e8e\u76f8\u5e94\u76ee\u5f55\u4e0b\uff08\u65b0\u65e7\u6a21\u677f\u4e0d\u901a\u7528\uff0c\u6a21\u677f\u53ef\u4ee5\u627e\u5382\u5bb6\u8981\uff0c\u4e5f\u53ef\u4ee5\u62f7\u8d1d\u96c6\u6210\u597d\u7684\u8f6f\u4ef6\u6a21\u677f\u518d\u505a\u4fee\u6539\uff09 #\u8fd9\u91cc\u4ee5\u65e7\u7248pbs\u65b0\u589e\u96c6\u6210Preonlab\u8f6f\u4ef6\u4e3a\u4f8b(\u5047\u8bbe\u6ca1\u627e\u5382\u5bb6\u8981\u6a21\u677f)\uff1a cd /var/spool/pas/repository/applications/ cp -r /var/spool/pas/repository/applications/StarCCM Preonlab #\u8fd9\u91cc\u7684Preonlab\u8981\u8ddf\u4e0b\u4e00\u6b65\u4e2did\u540e\u9762\u4e00\u6837 chmod -R 755 Preonlab cd Preonlab mv app-actions-StarCCM.xml app-actions-Preonlab.xml #\u8fd9\u91cc\u7684Preonlab\u8981\u8ddf\u4e0b\u4e00\u6b65\u4e2did\u540e\u9762\u4e00\u6837 mv app-conv-StarCCM.xml app-conv-Preonlab.xml #\u8fd9\u91cc\u7684Preonlab\u8981\u8ddf\u4e0b\u4e00\u6b65\u4e2did\u540e\u9762\u4e00\u6837\uff0c\u6b64\u914d\u7f6e\u6587\u4ef6\u7528\u6765\u5c06web\u9875\u9762\u4e2d\u7684\u952e\u5165\u53c2\u6570\u4f20\u9012\u5230\u540e\u53f0 mv app-inp-StarCCM.xml app-inp-Preonlab.xml #\u8fd9\u91cc\u7684Preonlab\u8981\u8ddf\u4e0b\u4e00\u6b65\u4e2did\u540e\u9762\u4e00\u6837 vi runtime/start.sh #\u4e3b\u8981\u662f\u4fee\u6539\u4f5c\u4e1a\u63d0\u4ea4\u7684\u4e00\u4e9b\u547d\u4ee4\uff0c\u6b64\u811a\u672c\u4e2d\u7684\u5185\u5bb9\u627e\u8c01\u5b89\u88c5\u8f6f\u4ef6\u7684\u8c01\u6709 vim submittime/presubmit.py #(\u53ef\u9009)\u6b64\u811a\u672c\u7528\u6765\u4fee\u6539\u9488\u5bf9\u8d44\u6e90\u6c60\u7684\u4e00\u4e9b\u7279\u5b9a\u4f7f\u7528\u89c4\u5219\uff0c\u6bd4\u5982\u4e0d\u901a\u8d44\u6e90\u6c60\u8bbe\u7f6e\u5bf9\u5e94\u7684cpu\u6838\u6570\uff0c\u6309\u9700\u8bbe\u7f6e\u76f8\u5e94\u7684\u4f5c\u4e1a\u8fd0\u884c\u65f6\u95f4\u7b49\u3002\uff08\u8fd9\u91ccsh\u6216py\u7684\u9009\u62e9\u6839\u636e\u914d\u7f6eapp-conv-StarCCM.xml: <jsdl-hpcp:Argument>runtime/start.sh</jsdl-hpcp:Argument>\u4e2d\u7684\u6307\u5411\u51b3\u5b9a\uff09 \u8865\u5145\uff1a\u4fee\u6539app-actions-StarCCM.xml app-conv-StarCCM.xml app-inp-StarCCM.xml runtime/start.sh \u6216 runtime/start.py submittime/presubmit.py \u4e94\u4e2a\u914d\u7f6e\u6587\u4ef6\u91cc\u9762\u6709\u5173\u8f6f\u4ef6\u540d\u53c2\u6570\u5168\u90e8\u66ff\u6362\u6210\u8981\u96c6\u6210\u7684\u65b0\u8f6f\u4ef6\u540d\uff0c\u540c\u65f6\u4fee\u6539app-actions-StarCCM.xml app-conv-StarCCM.xml app-inp-StarCCM.xml \u4e09\u4e2a\u6587\u4ef6\u540d\u4e3a\u65b0\u8f6f\u4ef6\u540d\u3002 vim /var/spool/PBS/server_priv/resourcedef #(\u53ef\u9009)\u5173\u4e8elicense\u914d\u7f6e\uff0c\u5982\u679clicense\u662f\u65e0\u9650\u70b9\u6570\uff0c\u8fd9\u91cc\u4e0d\u7528\u4fee\u6539\uff0c\u4fee\u6539\u53c2\u8003word\uff1aD:\\cyrus\\\u5965\u5de5\u79d1\u6280\\\u9879\u76ee\u6c47\u603b\\\u5947\u745e\uff08\u8fd0\u7ef4\uff09\\pbs license\u8c03\u5ea6.docx vim /var/spool/PBS/sched_priv/sched_config #(\u53ef\u9009)\u5173\u4e8elicense\u914d\u7f6e\uff0c\u5982\u679clicense\u662f\u65e0\u9650\u70b9\u6570\uff0c\u8fd9\u91cc\u4e0d\u7528\u4fee\u6539\uff0c\u4fee\u6539\u53c2\u8003word\uff1aD:\\cyrus\\\u5965\u5de5\u79d1\u6280\\\u9879\u76ee\u6c47\u603b\\\u5947\u745e\uff08\u8fd0\u7ef4\uff09\\pbs license\u8c03\u5ea6.docx \u6ce8\u610f\uff0c\u4e0a\u9762\u6dfb\u52a0\u7684\u7ea2\u6846\u540d\u79f0\u8981\u548c\u4e0a\u4e00\u6b65\u4e2d\u6dfb\u52a0\u7684\u540d\u79f0\u4e00\u81f4\u3002 \u6ce8\u610f\uff0c\u8fd9\u91cc\u7ea2\u6846\u540d\u79f0\u4e5f\u8981\u548c\u524d\u9762\u4e00\u81f4\uff0c\u7136\u540e\u52a0\u4e0alicense\u70b9\u6570\u83b7\u53d6\u811a\u672c\u7684\u8def\u5f84 # \u7f16\u5199license\u70b9\u6570\u83b7\u53d6\u811a\u672c\uff08\u811a\u672c\u5185\u5bb9\u53c2\u8003\u524d\u9762\u5199\u7684\u914d\u7f6e\u4e0a\u7684\u811a\u672c\uff09\uff08\u6b64\u811a\u672c\u7528\u6765\u83b7\u53d6\u5f53\u524dlicense\u7ba1\u7406\u5668\u4e2d\u5269\u4f59\u7684\u70b9\u6570\uff09 vim /usr/local/bin/crachfem_lic.sh #!/bin/bash #/usr/local/bin/lmutil lmstat -c 27000@10.1.7.39 -f abaqus | grep \"Users of abaqus\" |awk '{avail=$6 - $11}END{print avail}' use = ` /gs/CAE/STR/ABAQUS/2017/SIMULIA/Commands/abaqus licensing dslsstat -server 10 .1.7.39:4085 | grep Token | grep 210 | awk '{print $12}' | awk '{sum+=$1}END{print sum}' ` total_license = 210 ava = ` expr $total_license - $use ` echo $ava /usr/local/bin/lmutil lmstat -c 7790 @10.2.9.124 -a total_license = $( /usr/local/bin/lmutil lmstat -c 7790 @10.2.9.124 -a | grep lsdyna | awk '{print $6}' ) use = $( /usr/local/bin/lmutil lmstat -c 7790 @10.2.9.124 -a | grep lsdyna | awk '{print $11}' ) ava = $(( $total_license - $use )) echo $ava # \u4fee\u6539\u63d0\u4ea4\u6a21\u677f\uff0c vim submittime/presubmit.py 2.\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff08\u6dfb\u52a0\u4ec0\u4e48\u8f6f\u4ef6\u5c31\u6309\u60c5\u51b5\u6dfb\u52a0\u5230\u914d\u7f6e\u6587\u4ef6\u4e2d\uff09 <Application id = \"Preonlab\" > #\u8fd9\u91ccid\u540e\u9762\u4fee\u6539\u6210\u4e0a\u4e00\u6b65\u4e2dapp-actions-Preonlab.xml\u540d\u79f0\u91cc\u7684Preonlab <ApplicationVersions> <ApplicationVersion> <Option>5.2a</Option> <Executable>/gs/CAE/STR/ECS/FEMFAT5.2a/bin/femfat</Executable> #\u8fd9\u91cc\u4fee\u6539\u6210\u8f6f\u4ef6\u5b89\u88c5\u76ee\u5f55 </ApplicationVersion> <ApplicationVersion> <Option>5.2b</Option> <Executable>/gs/CAE/STR/ECS/FEMFAT5.2b/bin/femfat</Executable> #\u8fd9\u91cc\u4fee\u6539\u6210\u8f6f\u4ef6\u5b89\u88c5\u76ee\u5f55 </ApplicationVersion> <ApplicationVersion> <Option>5.3</Option> <Executable>/gs/CAE/STR/ECS/FEMFAT5.3/bin/femfat</Executable> #\u8fd9\u91cc\u4fee\u6539\u6210\u8f6f\u4ef6\u5b89\u88c5\u76ee\u5f55 </ApplicationVersion> </ApplicationVersions> </Application> 3.\u4e4b\u540e\u8fdb\u5165rm -rf /var/spool/pas/repository/time_stamp.txt 4.\u5c06\u8f6f\u4ef6\u52a0\u5165\u8d44\u6e90\u6c60 qmgr -c \"set node CAEOPE40 resources_available.pas_applications_enabled += Radioss\" ...","title":"\u5341\u3001\u96c6\u6210\u8f6f\u4ef6\uff08\u4fee\u6539\u914d\u7f6e\uff09"},{"location":"FAQ/#webunknownzacunknown-source","text":"\u6545\u969c\u622a\u56fe\uff1a # 1.\u67e5\u770bpbswork\u914d\u7f6e\u6587\u4ef6\u53c2\u6570 cat /etc/pbsworks.conf | grep CONFIG_HOME # 2.\u6839\u636e\u63d0\u4ea4\u4f5c\u4e1a\u7684\u7528\u6237\u540d\u8fdb\u884c\u4e09\u4e2a\u914d\u7f6e\u6587\u4ef6\u7684\u5220\u9664 rm -f $CONFIG_HOME /services/framework/data/users/<user_name>.xml rm -f $CONFIG_HOME /services/cm/data/users/<user_name>.xml rm -f $CONFIG_HOME /services/dm/data/users/<user_name>.xml \u811a\u672c\u8def\u5f84 \u811a\u672c\u4f7f\u7528\u8bf4\u660e /gs2/oglab/scripts/clean_user_xml.sh \u6267\u884c\u540e\uff0c\u8f93\u5165\u9700\u8981\u5220\u9664\u7684\u7528\u6237\u540d\u56de\u8f66\u5373\u53ef","title":"\u5341\u4e00\u3001web\u9875\u9762\u65e0\u6cd5\u63d0\u4ea4\u4f5c\u4e1a\u6216\u63d0\u4ea4\u4f5c\u4e1a\u63d0\u793aUnknown.zac(Unknown Source)\u7b49\u9519\u8bef"},{"location":"FAQ/#nastran-smp","text":"\u6545\u969c\u95ee\u9898\u8bf4\u660e\uff1a wangyingying\u7528\u6237\u63d0\u4ea4\u7684nastran-smp\u4f5c\u4e1a\u65e0\u6cd5\u8ba1\u7b97\u6210\u529f\uff0c\u4e00\u76f4\u5904\u4e8e\u8ba1\u7b97\u4e2d\uff0c\u5c0f\u7684\u7b97\u4f8b\u53ef\u4ee5\uff0c\u5927\u7684\u4e0d\u884c\uff0c\u4e14\u540c\u6837\u7684\u6a21\u578b\uff0c\u6211\u7528optistruct\u53ef\u4ee5\u8ba1\u7b97\u6210\u529f\u3002\u540c\u65f6\u7528\u6237\u8fd8\u53cd\u6620\u7b2c\u4e00\u6b21\u63d0\u4ea4\u4f5c\u4e1a\u8fd8\u63d0\u793a\u4e86\u5185\u5b58\u76f8\u5173\u7684\u62a5\u9519\u3002 \u6392\u67e5\u8fc7\u7a0b\uff1a 1.\u6000\u7591\u662f\u5185\u5b58\u6216\u672c\u5730\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\u5bfc\u81f4\uff0c\u68c0\u67e5\u53d1\u73b0\u5269\u4f59\u8d44\u6e90\u5145\u8db3 2.\u6000\u7591\u662f\u76f8\u5173\u914d\u7f6e\u505a\u4e86\u8d44\u6e90\u4f7f\u7528\u9650\u5236 3.\u8fdb\u8ba1\u7b97\u8282\u70b9\u7684/scratch\u76ee\u5f55\u4e2d\u67e5\u770b\u4f5c\u4e1a.o\u548c.e\u6587\u4ef6\uff0c\u90fd\u6ca1\u6709\u9519\u8bef\uff0c\u5219\u53ef\u80fd\u662f\u7528\u6237\u7b97\u529b\u95ee\u9898\u3002 \u6700\u7ec8\u89e3\u51b3\uff1a \u786e\u5b9e\u662f\u8f6f\u4ef6\u8fd0\u884c\u73af\u5883\u4e2d\u9650\u5236\u4e86\u5185\u5b58\u4f7f\u7528\uff0c\u5982\u4e0b\u662f\u4fee\u6539\u8fc7\u7a0b\uff1a vim /var/spool/pas/repository/applications/Nastran-smp/runtime/start.py","title":"\u5341\u4e8c\u3001nastran-smp\u4f5c\u4e1a\u65e0\u6cd5\u8ba1\u7b97\u6210\u529f\uff0c\u4e00\u76f4\u5904\u4e8e\u8ba1\u7b97\u4e2d"},{"location":"FAQ/#3216","text":"","title":"\u5c06\u622a\u56fe\u6240\u793a\u590432\u4fee\u6539\u621016\uff0c\u4fee\u6539\u5b8c\u65e0\u9700\u91cd\u542f\u670d\u52a1\uff0c\u91cd\u65b0\u63d0\u4ea4\u4f5c\u4e1a\u5373\u53ef"},{"location":"FAQ/#altair","text":"license\u7ba1\u7406\u5668\u5b89\u88c5\uff1a chmod +x *.bin # \u6267\u884c\u5b89\u88c5\uff0c\u4e2d\u95f4\u4f1a\u8981\u6c42\u586b\u4e0alicense\u6587\u4ef6\u4f4d\u7f6e\uff0c\u53ef\u4ee5\u9009no\u8df3\u8fc7\u7b49\u7ba1\u7406\u5668\u5b89\u88c5\u5b8c\u518d\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u4e5f\u884c ./ *.bin # \uff08\u53ef\u9009\uff09\u6b64\u6b65\u9aa4\u662f\u4e3a\u4e86\u4f7flicense\u7ba1\u7406\u5668\u8bc6\u522blicense\u6587\u4ef6\uff0c\u5982\u679c\u4e0a\u4e00\u6b65\u5df2\u7ecf\u6307\u5b9a\u4e86license\u6587\u4ef6\u4f4d\u7f6e\u5b89\u88c5\uff0c\u8fd9\u91cc\u5c31\u53ef\u4ee5\u4e0d\u7528\u518d\u505a vi /usr/local/altair/licensing14.5/altair-serv.cfg # (\u53ef\u9009) \u91cd\u542flicense\u7ba1\u7406\u5668 /etc/init.d/altairlmxd restart # \u68c0\u67e5license\u670d\u52a1\u662f\u5426\u542f\u52a8 netstat -nlp | grep 6200 altair \u4e00\u4e9b\u8f6f\u4ef6\u5b89\u88c5\uff1a chmod +x *.bin # \u6267\u884c\u5b89\u88c5\uff0c\u4e2d\u95f4\u4f1a\u8981\u6c42\u586b\u5199\u5b89\u88c5\u8def\u5f84\uff0c\u5176\u4f59\u4e00\u8defyes\u5373\u53ef ./ *.bin \u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u547d\u4ee4\u884c\u5229\u7528\u811a\u672c\u8fd0\u884c\u7a0b\u5e8f\uff0c\u4e0b\u9762\u662f\u5df2ufx\u8f6f\u4ef6\u4e3a\u4f8b\u7684\u811a\u672c\uff1a #!/bin/bash # license\u8def\u5f84 export ALTAIR_LICENSE_PATH = 6200 @gpu08 # \u8fd9\u4e00\u53e5\u662f\u6307\u5b9a\u663e\u5361\u5757\uff0c\u53ef\u7528nvidia-smi\u67e5\u770b\u5230 export CUDA_VISIBLE_DEVICES = 0 ,1,2,3,4,5,6,7 # \u8f6f\u4ef6\u5b89\u88c5\u4f4d\u7f6e source /seu_share/apps/hw2020.1/altair/hwcfdsolvers/ultrafluidx/linux64/scripts/set_uFX_environment.sh # \u8fd0\u884cufx\u8f6f\u4ef6(-np\u540e\u9762\u8bbe\u7f6e\u9700\u8981\u7684cpu\u6838\u6570\uff0cultraFluidX\u540e\u9762\u8bbe\u7f6e\u8ba1\u7b97\u7684\u6587\u4ef6) nohup mpirun -np 24 ultraFluidX *.xml > output.txt &","title":"\u5341\u4e09\u3001altair\u8f6f\u4ef6\u5b89\u88c5"},{"location":"FAQ/#dyna-license","text":"\u66ff\u6362\uff08\u53ea\u5728CAELNSE1\u4e2d\u64cd\u4f5c\uff09\uff1a # 1.\u767b\u5f55\u5230CAELNSE1\u8282\u70b9 # 2.\u67e5\u770blicense\u8fdb\u7a0b ps -elf | grep lstc_server # 2.\u8fdb\u5165license\u7ba1\u7406\u76ee\u5f55 cd /gs/home/zhangyingjun/mac_abstract/save1 # 3.\u5907\u4efd\u539flicense mv server_data server_data.bak # 4.\u5c06\u65b0license\u62f7\u8d1d\u8fdb\u6765 cp /gs2/server_data . # 5.\u67e5\u770blicense\u8fdb\u7a0b ps -elf | grep lstc_server # 6.\u5173\u95edlicense\u8fdb\u7a0b kill -9 \u8fdb\u7a0bid # 7.\u542f\u52a8license\u8fdb\u7a0b /gs/home/zhangyingjun/mac_abstract/save1/lstc_server -n -l /gs/home/zhangyingjun/mac_abstract/save1/logfie # 8.\u67e5\u770blicense\u72b6\u6001 /gs/home/zhangyingjun/mac_abstract/save1/lstc_qrun -s localhost -r \u66ff\u6362\u540e\u4fee\u6539dyna licens\u70b9\u6570\uff1a # \u8be2\u95eedyna license\u4f9b\u5e94\u5546\u589e\u52a0\u7684license\u70b9\u6570\uff08\u6bd4\u5982\u65b0\u589e\u4e86400\uff09 # \u67e5\u627edyna\u811a\u672c\u4f4d\u7f6e cat /var/spool/PBS/sched_priv/sched_config | grep dyna # \u6839\u636e\u4e0a\u4e00\u6b65\u67e5\u770b\u5230\u7684\u811a\u672c\u4f4d\u7f6e\u7f16\u8f91dyna\u811a\u672c\u6587\u4ef6,\u6bd4\u5982CAELNSE1\u8282\u70b9\u5e94\u8be5\u8bbe\u7f6e\uff1a vi /usr/local/bin/calc_lic.sh # \u6bd4\u5982144\u6838\u8282\u70b9\u5e94\u8be5\u8bbe\u7f6e\uff1a vi /usr/local/bin/dyna_lic.sh","title":"\u5341\u56db\u3001dyna license\u66ff\u6362"},{"location":"FAQ/#_8","text":"1.\u9996\u5148qstat -xf \u4f5c\u4e1a\u53f7 \u67e5\u770bcomment=...\uff0c\u770b\u770b\u4f5c\u4e1a\u8dd1\u5728\u54ea\u51e0\u4e2a\u8282\u70b9\u3002 2.\u767b\u5f55\u8fd9\u51e0\u4e2a\u8282\u70b9\u67e5\u770bcpu\u8d1f\u8f7d\uff0c\u8d1f\u8f7d\u9ad8\u4f4e\u6839\u636ecpu\u6838\u6570\u5224\u65ad\uff0c\u6bd4\u5982cpu\u6838\u657040\uff0c\u90a3\u4e48\u8d1f\u8f7d\u572840\u662f\u6b63\u5e38\u7684\uff0c\u8d85\u8fc740\u8fbe\u5230\u4fe9\u500d\uff0c\u8fd9\u79cd\u5c31\u662fpbs\u8c03\u5ea6\u51fa\u4e86\u95ee\u9898\uff0cpbs\u8c03\u5ea6\u7684\u65f6\u5019\u6ca1\u6709\u5224\u65ad\u597d\u6b64\u8282\u70b9\u6b63\u5728\u8dd1\u7684\u4f5c\u4e1a\u6216\u6b8b\u7559\u7684\u4f5c\u4e1a\uff0c\u7ee7\u7eed\u628a\u65b0\u4f5c\u4e1a\u8c03\u5ea6\u4e0a\u6765\uff0c\u8fd9\u6837\u80af\u5b9a\u5c31\u6162\u4e86\u3002\u6b64\u65f6\u5230CAELNSE1\u4e0a\u7528pestat|grep \u4f5c\u4e1a\u8dd1\u7684\u8282\u70b9\uff0c\u67e5\u770b\u6b64\u4f5c\u4e1a\u8fd0\u884c\u7684\u7528\u6237\uff0c\u518d\u5230\u4f5c\u4e1a\u8dd1\u7684\u8282\u70b9\u4e0atop\u5e76killall -u \u6389\u5176\u4ed6\u7528\u6237\u7684\u4f5c\u4e1a\u3002 \u5c0f\u6280\u5de7\uff1atop\u547d\u4ee4\u663e\u793a\u7528\u6237\u540d\u4e0d\u5168\u7684\u65f6\u5019\u4f1a\u663e\u793a\u4e3axiaying+\uff0ctop\u65f6\u6309f\u8fdb\u5165\u663e\u793a\u8bbe\u7f6e\uff0c\u7a7a\u683c\u52fe\u9009uid\u9009\u9879\uff0c\u6309q\u9000\u51fa\u5373\u53ef\u663e\u793a\u7528\u6237\u7684uid\uff0c\u4e4b\u540e\u518did uid\u547d\u4ee4\u663e\u793a\u7528\u6237\u540d\u5373\u53ef\u3002 3.\uff08\u53ef\u9009\uff09\u5982\u679c\u4ee5\u4e0a\u6ca1\u6709\u67e5\u5230\u539f\u56e0\uff0c\u53ef\u8fdb\u4e00\u6b65\u6392\u67e5\uff0c\u4e0b\u7ebf\u8282\u70b9\uff0c\u5bf9\u8282\u70b9\u8fdb\u884c\u5355\u8282\u70b9\u7684linpack\u6d4b\u8bd5\u548ciozone\u6d4b\u8bd5\u3002","title":"\u5341\u4e94\u3001\u4f5c\u4e1a\u8ba1\u7b97\u6162\u6392\u67e5"},{"location":"FAQ/#_9","text":"\u547d\u4ee4\uff1a find /opt/altair/pbsworks/13.1/exec/thirdparty/apache/tomcat/logs/ -mtime +30 | xargs rm -rf find /gs/scratch/ -mtime +30 | xargs rm -rf find /var/spool/PBS/server_logs/ -mtime +30 | xargs rm -rf find /var/spool/PBS/mom_logs/ -mtime +30 | xargs rm -rf find /scratch/ -mtime +30 | xargs rm -rf find /var/spool/pbs/mom_logs/ -mtime +30 | xargs rm -rf \u811a\u672c\uff1a #!/bin/bash location1 = \"/gs/scratch/\" location2 = \"/scratch/\" location3 = \"/var/spool/PBS/server_logs/\" location4 = \"/var/spool/PBS/mom_logs/\" location6 = \"/var/spool/pbs/mom_logs/\" location5 = \"cd /opt/altair/pbsworks/13.1/exec/thirdparty/apache/tomcat/logs/\" #find $location1 -mtime +30 |xargs rm -rf #\u5220\u9664\u76ee\u5f55\u53ca\u6587\u4ef6 #find $location2 -mtime +30 |xargs rm -rf #\u5220\u9664\u76ee\u5f55\u53ca\u6587\u4ef6\u3002\u6240\u6709\u8ba1\u7b97\u8282\u70b9\u6267\u884c #find $location3 -mtime +30 |xargs rm -rf #\u5220\u9664\u76ee\u5f55\u53ca\u6587\u4ef6 find $location4 -mtime +30 | xargs rm -rf #\u5220\u9664\u76ee\u5f55\u53ca\u6587\u4ef6\uff0c\u6240\u6709\u8ba1\u7b97\u8282\u70b9\u6267\u884c #find $location5 -mtime +30 |xargs rm -rf #\u5220\u9664\u76ee\u5f55\u53ca\u6587\u4ef6 find $location6 -mtime +30 | xargs rm -rf #\u5220\u9664\u76ee\u5f55\u53ca\u6587\u4ef6\uff0c\u6240\u6709\u8ba1\u7b97\u8282\u70b9\u6267\u884c","title":"\u5341\u516d\u3001\u65e7\u6570\u636e\u6e05\u7406"},{"location":"FAQ/#_10","text":"#\u65e7\u7248pbs\u8def\u5f84 cd /var/spool/pas/repository/applications/Dyna-mpp #\u65b0\u7248pbs\u8def\u5f84 cd /var/spool/pbsworks/2020.4/access/home/data/pas/targets/localhost/repository/applications/STC-view vim submittime/presubmit.py \u6dfb\u52a0 walltime=1:00:00; \u6216\u8005\u4fee\u6539","title":"\u5341\u4e03\u3001\u66f4\u6539\u5e94\u7528\u63d0\u4ea4\u4f5c\u4e1a\u7684\u6700\u5927\u8fd0\u884c\u65f6\u957f"},{"location":"FAQ/#_11","text":"#\u67e5\u770b\u4f5c\u4e1a\u8f93\u51fa\u76ee\u5f55 qstat -xf \u4f5c\u4e1aid | grep stage #\u8fdb\u5165\u5230\u4f5c\u4e1a\u8f93\u51fa\u76ee\u5f55\uff08tab\u952e\u8865\u5168\uff09 cd /gs/stage/xushuang/T19C_M2EM_SpindLoad_80_0318-03-1 #\u67e5\u770b\u8f93\u51fa\u9519\u8bef\u65e5\u5fd7 cat T19C_M2EM_SpindLoad_80_0318.e318611 #\u67e5\u770b\u6807\u51c6\u8f93\u51fa\u65e5\u5fd7 cat T19C_M2EM_SpindLoad_80_0318.o318611 \u5982\u56fe\u662f\u6807\u51c6\u8f93\u51fa\u65e5\u5fd7\u7684\u5185\u5bb9\uff0c\u4e00\u822c\u60c5\u51b5\u4e2d\uff0c\u6700\u540e\u90fd\u662f\u63d0\u793a\u4f5c\u4e1a\u6b63\u5e38\u5b8c\u6210\uff0c\u53ef\u4ee5\u4e0d\u7528\u7ba1\u4e86\u3002\u4f46\u662f\u8fd9\u4e2a\u622a\u56fe\u4e0a\u9762\u62a5\u4e86\u4e00\u4e2a\u9519\uff0c\u610f\u601d\u662f\u6a21\u578b\u53d1\u751f\u81f4\u547d\u9519\u8bef\uff0c\u8fd9\u79cd\u53ef\u6839\u636e\u62a5\u9519\u5185\u5bb9\u4e2d\u7684\u63d0\u793a\u201c.out\u201d\uff0c\u6253\u5f00\u5f53\u524d\u76ee\u5f55\u4e2d.out\u6587\u4ef6\u67e5\u770b\u5177\u4f53\u8be6\u60c5\uff0c\u5982\u679c\u62a5\u9519\u662f\u5173\u4e8e\u5e94\u7528\u7684\uff0c\u5219\u622a\u56fe.out\u6587\u4ef6\u5185\u5bb9\uff0c\u8ba9\u5947\u745e\u627e\u5e94\u7528\u5382\u5546\u6392\u67e5\u3002","title":"\u5341\u516b\u3001\u67e5\u770b\u4f5c\u4e1a\u8f93\u51fa\u65e5\u5fd7"},{"location":"FAQ/#caelnse1pbs","text":"\u62a5\u9519\u5982\u56fe\uff1a \u89e3\u51b3\uff1a cd /opt/pbs/bin cp qstat_18.2 qstat /etc/init.d/pbs restart cp qstat_13.1 qstat","title":"\u5341\u4e5d\u3001caelnse1\u4e0apbs\u65e0\u6cd5\u91cd\u542f"},{"location":"FAQ/#ib_1","text":"\u547d\u4ee4\uff1aiblinkinfo \u548c ibdiagnet \u4ee5\u4e0b\u622a\u56fe\u663e\u793a\u4e86\u4ea4\u6362\u673a20\u7aef\u53e3\u62a5\u9519","title":"\u4e8c\u5341\u3001\u68c0\u67e5ib\u4ea4\u6362\u673a\u7aef\u53e3"},{"location":"FAQ/#_12","text":"","title":"\u4e8c\u5341\u4e00\u3001\u5907\u4efd\u5173\u952e\u76ee\u5f55\u548c\u6587\u4ef6"},{"location":"FAQ/#_13","text":"# 1\u3001\u67e5\u770b\u6240\u6709\u961f\u5217\u4fe1\u606f\uff08\u5176\u4e2d\u6709\u4e2acompute\u5bf9\u5217\uff0c\u5b83\u662f\u8def\u7531\u5bf9\u5217\uff0c\u6bcf\u6b21\u7528\u6237\u63d0\u4ea4\u4f5c\u4e1a\uff0c\u90fd\u4f1a\u5148\u627e\u8def\u7531\u5bf9\u5217\uff0c\u7136\u540e\u518d\u627e\u5230\u5bf9\u5e94\u7684\u7ec4\u5bf9\u5217\uff09 qmgr -c \"p s\" # 2\u3001\u4fee\u6539\u7ec4\u961f\u5217\u6700\u5927\u6240\u6709\u6210\u5458\u6700\u5927\u8fd0\u884c\u6838\u6570 qmgr -c \"s q CRASH max_run_res.ncpus=[o:PBS_ALL=1000]\" # 3\u3001\u7ec4\u961f\u5217\u6dfb\u52a0\u7528\u6237 qmgr -c \"s q CRASH acl_users += \u4eba\u540d\" # 4\u3001\u8def\u7531\u5bf9\u5217\u6dfb\u52a0\u7ec4\u961f\u5217\uff08\u5728\u9700\u8981\u6dfb\u52a0\u65b0\u7684\u7ec4\u5bf9\u5217\u540e\u518d\u4f7f\u7528\uff09 qmgr -c \"s q compute route_destinations += \u7ec4\u961f\u5217\u540d\" # 5\u3001\u4e3a\u67d0\u4e2a\u7528\u6237\u8bbe\u7f6e\u6700\u5927\u8fd0\u884c\u6838\u6570 qmgr -c \" s s max_run_res.ncpus+=[u:\u7528\u6237\u540d=\u6838\u6570]\"","title":"\u4e8c\u5341\u4e8c\u3001\u961f\u5217\u8bbe\u7f6e"},{"location":"FAQ/#_14","text":"# 1.\u4fee\u6539\u6dfb\u52a0\u8f66\u578b\uff0c\u9875\u9762\u4e0a\u9ed8\u8ba4\u4ee5\u6b64\u6587\u4ef6\u987a\u5e8f\u663e\u793a\u8f66\u578b\uff0c\u5982\u679c\u6b64\u6587\u4ef6\u7b2c\u4e00\u884c\u8bbe\u7f6e\u4e3a\u7a7a\u884c\uff0c\u5219\u9875\u9762\u9ed8\u8ba4\u9009\u4e2d\u7684\u662f\u8fd9\u4e2a\u7a7a\u884c\uff0c\u663e\u793a\u4e3a\u7a7a\u767d vim /var/spool/pas/repository/model # 2.\u4fee\u6539\u6307\u5b9a\u5e94\u7528\u7684\u63d0\u4ea4\u6a21\u677f vim submittime/presubmit.py","title":"\u4e8c\u5341\u4e09\u3001\u8f66\u578b\u96c6\u6210"},{"location":"FAQ/#t21web","text":"model=str(userInputs['MODEL']) if str(model).strip() == '' : sys.exit('Please select the correct vehicle!') if str(model).strip() == 'T21' : sys.exit('Please select the correct vehicle!') Tips:\u76ee\u524d\u6d89\u53ca\u7684\u8f6f\u4ef6\u6709 Abaqus-smp CrachFEM-mpp Feko Madymo-mpp Nastran-AMLS Nastran-smp Optistruct Optistruct_mmo Powerflow Preonlab Radioss StarCCM VAOne # 3.\uff08\u53ef\u9009\u505a\uff09 rmtime","title":"\u4ee5\u4e0b\u914d\u7f6e\u8868\u793a\u5f53\u9009\u62e9\u7a7a\u884c\u6216T21\u8f66\u578b\u65f6\uff0c\u5c06\u65e0\u6cd5\u63d0\u4ea4\uff0c\u5728web\u4e0a\u4f1a\u62a5\u9519"},{"location":"FAQ/#_15","text":"# 1.\u8c03\u6574\u4f5c\u4e1a\u4f18\u5148\u7ea7 qalter -l higher = 1000 349937 higher=\u4f18\u5148\u7ea7 349937 \u4f5c\u4e1a\u53f7 # 2.\u67e5\u770b\u6240\u6709\u4f5c\u4e1a\u4f18\u5148\u7ea7\u547d\u4ee4\uff1a /opt/pbs/unsupported/pbs_stat --include-running --eval-formula #\u67e5\u770b\u6392\u961f\u4f5c\u4e1a\u4f18\u5148\u7ea7\u547d\u4ee4\uff1a /opt/pbs/unsupported/pbs_stat --eval-formula Tips\uff1a \u9047\u5230\u8fc7\u8c03\u6574\u4f18\u5148\u7ea7\u65e0\u6548\u7684\u60c5\u51b5\uff0c\u4ee5\u4e0b\u662f\u89e3\u51b3\u65b9\u5f0f(\u8c03\u6574\u8c03\u5ea6\u7b56\u7565)\uff1a vim /var/spool/PBS/sched_priv/sched_conf \u52a0\u4e00\u884c job_sort_key: \"higher HIGH\" ALL # \u4e4b\u540e\u6309\u987a\u5e8f\u6267\u884c 1 .qmgr -c \"set server scheduling =false\" 2 . cat /var/spool/pbs/sched_logs/20200429 \u67e5\u770b\u6700\u540e\u4e00\u884c\u662fLeaving Scheduling Cycle 3 . /etc/init.d/pbs status \u83b7\u53d6pbs_sched is pid 82896 4 . kill -9 82896 5 . /etc/init.d/pbs status \u786e\u8ba4pbs_sched not running 6 . /etc/init.d/pbs start ; /etc/init.d/pbs status \u68c0\u67e5pbs_sched\u6b63\u5e38\u8fd0\u884c 7 . qmgr -c \"set server scheduling = true\" \u5f00\u542f\u8c03\u5ea6 graph LR A[\u9752\u67e0\u5b66\u672f]-->B[\u535a\u4e3b] A-->C[Up\u4e3b] A-->D[\u793e\u7fa4] B-->E[\u516c\u4f17\u53f7] B-->F[\u77e5\u4e4e] C-->H[B\u7ad9] C-->I[\u8354\u679d\u5fae\u8bfe] D-->J[\u77e5\u8bc6\u661f\u7403] D-->K[\u5fae\u4fe1\u7fa4] graph TD A[\u9752\u67e0\u5b66\u672f]-->B[\u535a\u4e3b] A-->C[Up\u4e3b] A-->D[\u793e\u7fa4] B-->E[\u516c\u4f17\u53f7] B-->F[\u77e5\u4e4e] C-->H[B\u7ad9] C-->I[\u8354\u679d\u5fae\u8bfe] D-->J[\u77e5\u8bc6\u661f\u7403] D-->K[\u5fae\u4fe1\u7fa4] sequenceDiagram Alice->>+John: Hello John, how are you? Alice->>+John: John, can you hear me? John-->>-Alice: Hi Alice, I can hear you! John-->>-Alice: I feel great! stateDiagram-v2 [*] --> Still Still --> [*] Still --> Moving Moving --> Still Moving --> Crash Crash --> [*] pie title Pets adopted by volunteers \"Dogs\" : 386 \"Cats\" : 85 \"Rats\" : 15","title":"\u4e8c\u5341\u56db\u3001\u8c03\u6574\u4f5c\u4e1a\u4f18\u5148\u7ea7"},{"location":"FAQ/#_16","text":"PBS PRO\u52a8\u4f5c \u547d\u4ee4 GPFS\u52a8\u4f5c \u547d\u4ee4 \u91cd\u542fPBS /etc/init.d/pbs restart \u6574\u7406gpfs\u788e\u7247 mmdefragfs gpfsname -u 100 \u91cd\u542fPBS WORKS /etc/init.d/pbsworks restart \u67e5\u770bgpfs\u5ef6\u8fdf mmfsadm dump waiter pbs pro\u4e0a\u7ebf\u8282\u70b9 pbsnodes -c \u8282\u70b9\u540d \u68c0\u67e5\u662f\u5426\u8fd0\u884c\u5728ib\u7f51\u7edc mmfsadm test verbs status pbs pro\u4e0b\u7ebf\u8282\u70b9 pbsnodes -o \u8282\u70b9\u540d gpfs\u91cd\u542f\u524d\u65e5\u5fd7\u8def\u5f84 /var/adm/ras/mmfs.log.previous pbs\u67e5\u770b\u67d0\u4e2a\u4f5c\u4e1a qstat -xf \u4f5c\u4e1aid gpfs\u91cd\u542f\u540e\u65e5\u5fd7\u8def\u5f84 /var/adm/ras/mmfs.log.latest \u67e5\u770bpbs\u8282\u70b9\u72b6\u6001 pestat|grep -i \u8282\u70b9\u540d gpfs\u6e05\u7406\u810f\u6570\u636e\u548c\u4fee\u590d\uff08-y\u53ef\u907f\u514dyes\u95ee\u7b54\uff0c-o\u662f\u5728\u7ebf\u4e0d\u505c\u673a\u6267\u884c\uff09 mmfsck gpfsname -y -o pbs server\u65e5\u5fd7\u8def\u5f84 /var/spool/PBS/server_logs \u67e5\u770b\u78c1\u76d8\u914d\u989d\u7528\u91cf mmrepquota -a --block-size auto \u6216mmlsquota -u $USER --block-size auto pbs client\u65e5\u5fd7\u8def\u5f84 /var/spool/PBS/mom_logs \u8bbe\u7f6e\u9ed8\u8ba4\u914d\u989d\u8f6f\u786c\u9650\u5236\uff0c\u8fdb\u53bb\u7c7b\u4f3c\u4e8evim\u7f16\u8f91 mmdefedquota -u GridScaler pbs\u6dfb\u52a0\u8282\u70b9 qmgr -c \"c n \u8282\u70b9\u540d\" \u8bbe\u7f6e\u7528\u6237\u6216\u7ec4\u8f6f\u786c\u9650\u5236\u914d\u989d\uff08\u6ce8\u610f\u6570\u5b57\u4e0d\u80fd\u662f\u5c0f\u6570\uff09 mmsetquota -u fujie -s 3T -h 0 GridScaler2 pbs\u5220\u9664\u8282\u70b9 qmgr -c \"d n \u8282\u70b9\u540d\" \u5237\u65b0quota mmcheckquota -a pbs\u67e5\u770b\u8bbe\u7f6e\u4fe1\u606f qmgr -c \"p s\" \u67e5\u770b nsd \u4e0e\u5b58\u50a8\u76d8\u7684\u5bf9\u5e94\u5173\u7cfb mmlsnsd -m pbs\u67e5\u770b\u8282\u70b9\u4fe1\u606f qmgr -c \"p n \u8282\u70b9\u540d\" \u67e5\u770bnsd\u865a\u62df\u78c1\u76d8\u548cgpfs\u6587\u4ef6\u7cfb\u7edf\u4e4b\u95f4\u7684\u72b6\u6001 mmlsdisk gpfs01 pbs \u7f13\u5b58\u8def\u5f84 /gs/scratch\u548c/gs/scratch2 \u6062\u590d\u6216\u542f\u52a8\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6240\u6709nsd mmchdisk gpfs01 resume/start -a \u63d0\u4ea4\u4f5c\u4e1a qsub \u4f5c\u4e1a\u811a\u672c \u8bbe\u7f6e\u8f6f\u9650\u5236\u7684\u5bbd\u9650\u5929\u6570 mmsetquota -t 14D -u GridScaler2 \u5220\u9664\u4f5c\u4e1a qdel \u4f5c\u4e1aid \u67e5\u770b\u5feb\u7167 mmlssnapshot GridScaler \u6e05\u7406\u65e5\u5fd71 /opt/altair/pbsworks/13.1/exec/thirdparty/apache/tomcat/logs \u67e5\u770b\u5feb\u7167\u5bb9\u91cf mmlssnapshot GridScaler -d --block-size auto \u8ffd\u8e2a\u4f5c\u4e1a tracejob \u4f5c\u4e1aid \u5220\u9664\u5feb\u7167 mmdelsnapshot GridScaler snap_20191021 \u67e5\u770bib\u7f51\u7edc\u72b6\u6001 iblinkinfo \u548c ibdiagnet","title":"\u5e38\u7528\u547d\u4ee4\u53ca\u8def\u5f84"},{"location":"about/","text":"\u8bf4\u660e \u00b6 \u6b64\u9875\u9762\u8bb0\u5f55\u4e86\u5f53\u524d\u548c\u5df2\u77e5\u7684\u5373\u5c06\u5230\u6765\u7684\u7ef4\u62a4\u7a97\u53e3\u3002 \u9650\u5236\u5168\u5c40\u5185\u5b58\u4f7f\u7528\uff0c2022 \u5e74 2 \u6708 14 \u65e5 \u00b6 \u6bcf\u4e2a\u7528\u6237\u7684\u5168\u5c40\u5185\u5b58\u5206\u914d\u9650\u5236\u662f\u6309\u5206\u533a\u8bbe\u7f6e\u7684\u3002 \u8be5\u503c\u8bbe\u7f6e\u4e3a\u201c\u6bcf\u4e2a\u7528\u6237\u7684\u6700\u5927 CPU \u8ba1\u6570 * 7GB\u201d\u3002 \u7528\u6237\u6700\u591a\u53ef\u4ee5\u5206\u914d\u201cmax cpu count\u201d CPU \u6216\u201cmax cpu count * 7GB\u201d RAM\u3002 Ganglia \u4fee\u590d\u548c\u6587\u6863\uff0c2022 \u5e74 2 \u6708 3 \u65e5 \u00b6 \u4fee\u590dGanglia\u4e2d\u7684 GPFS \u548c NVIDIA GPU \u76d1\u63a7 \u6839\u672c\u539f\u56e0\u662f Ganglia \u4e2d\u7684 Python \u6a21\u5757\u5df2\u4ece EPEL \u4e2d\u5220\u9664\u3002\u6211\u4eec\u73b0\u5728\u6709\u4e00\u4e2a Ganglia \u7684\u672c\u5730\u5305\u6784\u5efa\uff0c\u5982\u679c\u60a8\u6709\u5174\u8da3\uff0c\u8fd9\u91cc\u662f\u8865\u4e01\u548c\u57fa\u4e8e Docker \u7684\u6784\u5efa\u8bf4\u660e\u3002 \u60a8\u53ef\u4ee5\u5728\u6b64\u5904\u627e\u5230\u6709\u5173\u6211\u4eec\u7684 Ganglia \u7684\u4e00\u4e9b\u6587\u6863\u3002 \u4ee5\u524d\u7684\u7ef4\u62a4 \u00b6 \u6ca1\u6709","title":"\u5f52\u6863"},{"location":"about/#_1","text":"\u6b64\u9875\u9762\u8bb0\u5f55\u4e86\u5f53\u524d\u548c\u5df2\u77e5\u7684\u5373\u5c06\u5230\u6765\u7684\u7ef4\u62a4\u7a97\u53e3\u3002","title":"\u8bf4\u660e"},{"location":"about/#2022-2-14","text":"\u6bcf\u4e2a\u7528\u6237\u7684\u5168\u5c40\u5185\u5b58\u5206\u914d\u9650\u5236\u662f\u6309\u5206\u533a\u8bbe\u7f6e\u7684\u3002 \u8be5\u503c\u8bbe\u7f6e\u4e3a\u201c\u6bcf\u4e2a\u7528\u6237\u7684\u6700\u5927 CPU \u8ba1\u6570 * 7GB\u201d\u3002 \u7528\u6237\u6700\u591a\u53ef\u4ee5\u5206\u914d\u201cmax cpu count\u201d CPU \u6216\u201cmax cpu count * 7GB\u201d RAM\u3002","title":"\u9650\u5236\u5168\u5c40\u5185\u5b58\u4f7f\u7528\uff0c2022 \u5e74 2 \u6708 14 \u65e5"},{"location":"about/#ganglia-2022-2-3","text":"\u4fee\u590dGanglia\u4e2d\u7684 GPFS \u548c NVIDIA GPU \u76d1\u63a7 \u6839\u672c\u539f\u56e0\u662f Ganglia \u4e2d\u7684 Python \u6a21\u5757\u5df2\u4ece EPEL \u4e2d\u5220\u9664\u3002\u6211\u4eec\u73b0\u5728\u6709\u4e00\u4e2a Ganglia \u7684\u672c\u5730\u5305\u6784\u5efa\uff0c\u5982\u679c\u60a8\u6709\u5174\u8da3\uff0c\u8fd9\u91cc\u662f\u8865\u4e01\u548c\u57fa\u4e8e Docker \u7684\u6784\u5efa\u8bf4\u660e\u3002 \u60a8\u53ef\u4ee5\u5728\u6b64\u5904\u627e\u5230\u6709\u5173\u6211\u4eec\u7684 Ganglia \u7684\u4e00\u4e9b\u6587\u6863\u3002","title":"Ganglia \u4fee\u590d\u548c\u6587\u6863\uff0c2022 \u5e74 2 \u6708 3 \u65e5"},{"location":"about/#_2","text":"\u6ca1\u6709","title":"\u4ee5\u524d\u7684\u7ef4\u62a4"},{"location":"Cyrus0w/%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97/%E7%9B%91%E6%8E%A7/ganglia/","text":"ganglia\u76d1\u63a7slurm\u4f5c\u4e1a \u00b6 ganglia\u76d1\u63a7slurm\u4f5c\u4e1a \u524d\u8a00 \u4e00\u3001\u90e8\u7f72 1.1 \u63d2\u4ef6\u5de5\u4f5c\u539f\u7406\u8bf4\u660e 1.2 \u90e8\u7f72ganglia 1.3 \u90e8\u7f72postgresql\u6570\u636e\u5e93 1.4 \u90e8\u7f72\u914d\u7f6ejobarchived 1.5 \u8bbe\u7f6eganglia \u63d2\u4ef6web\u9875\u9762 1.6 \u90e8\u7f72PySlurm 1.7 \u90e8\u7f72\u914d\u7f6ejobmond 1.8 \u6700\u7ec8\u6d4b\u8bd5 \u7ed3\u8bed \u524d\u8a00 \u00b6 \u5b98\u65b9\u6559\u7a0b\uff1a https://oss.trac.surfsara.nl/jobmonarch \u6548\u679c\u56fe\uff1a \u96c6\u7fa4\u548c\u6240\u6709\u4f5c\u4e1a\u7684\u6982\u8ff0 \u96c6\u7fa4\u6982\u8ff0\uff0c\u4f5c\u4e1a\u8fc7\u6ee4\u6761\u4ef6\uff1a\u961f\u5217\u548c\u72b6\u6001 \u5de5\u4f5c\u89c6\u56fe \u4e00\u3001\u90e8\u7f72 \u00b6 1.1 \u63d2\u4ef6\u5de5\u4f5c\u539f\u7406\u8bf4\u660e \u00b6 1.2 \u90e8\u7f72ganglia \u00b6 \u8bf4\u660e\uff1a\u90e8\u7f72\u7565\uff0cganglia\u7248\u672cgmond >= v3.4.x \uff0cgmetad v3.4.x \uff0cGanglia web-2 frontend v3.5.x \uff0cGD v2.x , PHP v5.1 or higher \uff08with: postgres and GD support\uff09\u540c\u65f6\u6ce8\u610fserver\u7aef\u8fd8\u9700\u8981\u5148\u5b89\u88c5\u4ee5\u4e0b\u51e0\u4e2a\u57fa\u7840\u5305\uff1a yum install httpd php php-gd php-pgsql rrdtool perl-rrdtool rrdtool-devel rrdtool-python gd python-devel 1.3 \u90e8\u7f72postgresql\u6570\u636e\u5e93 \u00b6 # 1.\u5728ganglia server\u7aef\u90e8\u7f72\u6570\u636e\u5e93 yum install postgresql-server postgresql-devel postgresql # 2.\u521d\u59cb\u5316\u6570\u636e\u5e93 postgresql-setup initdb systemctl start postgresql # 3.\u8bbe\u7f6e\u5bc6\u7801 su - postgres psql \\p assword \\q exit # 4.\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u4ee5\u4fbf\u767b\u5f55\u6570\u636e\u5e93\u65f6\u5fc5\u987b\u4f7f\u7528\u5bc6\u7801 vim /var/lib/pgsql/data/pg_hba.conf \u5982\u56fe(\u6539\u4e3amd5): # 5.\u91cd\u542f systemctl restart postgresql # 6.\u5b89\u88c5psycopg2\uff08\u7528\u6765python\u8c03\u7528postgresql\u6570\u636e\u5e93\uff09 pip install psycopg2 # 7.\u4e0b\u8f7d\u63d2\u4ef6\u6587\u4ef6\u5e76\u89e3\u538b\uff0c\u83b7\u53d6\u6570\u636e\u5e93\u8868\u6587\u4ef6 wget http://ftp.surfsara.nl/pub/outgoing/jobmonarch/1.1.2/ganglia_jobmonarch-1.1.2.tar.gz tar xf ganglia_jobmonarch-1.1.2.tar.gz # 8.\u521b\u5efajobarchive\u6570\u636e\u5e93 su - postgres createdb jobarchive cd ganglia_jobmonarch-1.1.2 psql -f jobarchived/job_dbase.sql jobarchive # 9.\u67e5\u770b\u6570\u636e\u5e93 \\l 1.4 \u90e8\u7f72\u914d\u7f6ejobarchived \u00b6 # 1.\u5728ganglia\u670d\u52a1\u7aef\u4e0b\u8f7d\u63d2\u4ef6\u6587\u4ef6\u5e76\u89e3\u538b(\u4e0a\u4e00\u6b65\u6570\u636e\u5e93\u5df2\u7ecf\u4e0b\u8f7d\u8fc7) wget http://ftp.surfsara.nl/pub/outgoing/jobmonarch/1.1.2/ganglia_jobmonarch-1.1.2.tar.gz tar xf ganglia_jobmonarch-1.1.2.tar.gz # 2.\u90e8\u7f72jobarchived cd ganglia_jobmonarch-1.1.2 cp jobarchived/jobarchived.conf /etc/jobarchived.conf cp jobarchived/jobarchived.py /usr/local/sbin/jobarchived.py # 3. \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\uff08\u7eff\u8272\u8bf4\u660e\u5904\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\uff09 vim /etc/jobarchived.conf [ DEFAULT ] # Wether or not to run as a daemon in background # DAEMONIZE : 0 # Specify debugging level here (only when _not_ DAEMONIZE) # # 11 = XML: metrics # 10 = XML: host, cluster, grid, ganglia # 9 = RRD activity, gmetad config parsing # 8 = RRD file activity # 6 = SQL # 1 = daemon threading # 0 = errors # # default: 0 # DEBUG_LEVEL : 1 # Enable logging to syslog? # USE_SYSLOG : 1 # What level msg'es should be logged to syslog? # # usually: lvl 0 (errors) # SYSLOG_LEVEL : 0 # Which facility to use in syslog # # Known: # KERN, USER, MAIL, DAEMON, AUTH, LPR, # NEWS, UUCP, CRON and LOCAL0 through LOCAL7 # SYSLOG_FACILITY : DAEMON # Where is the gmetad.conf located # GMETAD_CONF : /etc/ganglia/gmetad.conf ` gmetad\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u4e00\u822c\u9ed8\u8ba4\u5728\u6b64\u8def\u5f84\u4e0b ` # Where to grab XML data from # Usually: local gmetad (port 8651) # # Syntax: <hostname>:<port> # ARCHIVE_XMLSOURCE : localhost:8651 ` ganglia\u670d\u52a1\u7aef\u5730\u5740\u548c\u7aef\u53e3\uff0c\u56e0\u4e3a\u5728\u672c\u673a\u4e2d\uff0c\u6240\u4ee5\u8fd9\u91cc\u76f4\u63a5\u5199localhost:8651 ` # List of data_source names to archive for # # Syntax: [ \"<clustername>\", \"<clustername>\" ] # ARCHIVE_DATASOURCES : [ \"OGSAAS\" ] ` ganglia\u4e2d\u8bbe\u7f6e\u7684\u96c6\u7fa4\u540d\u79f0 ` # Amount of hours to store in one single archived rrd # # If you would like less files you can set this bigger # but could degrade performance # # For now 12 hours seems to work: 2 periods per day # ARCHIVE_HOURS_PER_RRD : 12 # Which metrics to exclude from archiving # NOTE: This can be a regexp or a string # ARCHIVE_EXCLUDE_METRICS : \".*Temp.*\" , \".*RPM.*\" , \".*Version.*\" , \".*Tag $ \" , \"boottime\" , \"gexec\" , \"os.*\" , \"machine_type\" # Where to store the archived rrd's # #ARCHIVE_PATH : __JOBARCHIVE_RRDS__ ARCHIVE_PATH : /usr/local/jobmonarch ` \u81ea\u5b9a\u4e49rrd\u6570\u636e\u5e93\u6570\u636e\u5b58\u50a8\u76ee\u5f55\uff0c\u540e\u9762\u63d2\u4ef6\u7684web\u9875\u9762\u8981\u8c03\u7528 ` # Archive's SQL dbase to use # # Syntax: <hostname>/<database> # JOB_SQL_DBASE : localhost/jobarchive ` \u6570\u636e\u5e93\u5730\u5740\u548c\u6570\u636e\u5e93\u540d\u79f0 ` JOB_SQL_USER : postgres ` \u6570\u636e\u5e93\u7528\u6237\u540d ` JOB_SQL_PASSWORD : 1qaz2WSX ` \u6570\u636e\u5e93\u5bc6\u7801 ` # Timeout for jobs in archive # # Assume job has already finished while jobarchived was not running # after this amount of hours: the it will be finished anyway in the database # JOB_TIMEOUT : 168 # Location of rrdtool binary # RRDTOOL : /usr/bin/rrdtool # 4.\u542f\u52a8\u4f5c\u4e1a\u5f52\u6863\u63d2\u4ef6 jobarchived.py # 5.\u68c0\u67e5\u63d2\u4ef6\u662f\u5426\u8fd0\u884c\u5728\u540e\u53f0 ps aux | grep jobarchived 1.5 \u8bbe\u7f6eganglia \u63d2\u4ef6web\u9875\u9762 \u00b6 # 1.\u5728\u524d\u9762\u4e0b\u8f7d\u89e3\u538b\u7684\u76ee\u5f55\u4e2d\uff0c\u5c06web\u6a21\u677f\u62f7\u8d1d\u5230ganglia\u9875\u9762\u7684\u6839\u76ee\u5f55\u4e2d cd ganglia_jobmonarch-1.1.2 cp -a web/templates/job_monarch /var/www/html/templates mkdir /var/www/html/addons cp -a web/addons/job_monarch /var/www/html/addons # 2.\u914d\u7f6eweb\u9875\u9762 vi /var/www/html/conf_default.php == > $conf [ 'template_name' ] = \"job_monarch\" ; vim /var/www/html/addons/job_monarch/conf.php <?php // Show hosts in a jobview by default? // $default_showhosts = true ; // Stop displaying archive search results after SEARCH_RESULT_LIMIT // $SEARCH_RESULT_LIMIT = 20 ; // Show the column job attribute 'requested memory'? // $COLUMN_REQUESTED_MEMORY = false ; // Show the column job attribute 'queued' (since)? // $COLUMN_QUEUED = true ; // Show the column job attribute 'nodes' hostnames? // $COLUMN_NODES = true ; // Path to Ganglia's web frontend root // // $GANGLIA_PATH = \"/data/ganglia-web-current/\"; $GANGLIA_PATH = \"/var/www/html\" ; `\u8fd9\u91cc\u5199ganglia\u9875\u9762\u7684\u6839\u76ee\u5f55` //$GANGLIA_PATH = \"../..\"; // Format of how to display a date and time in human readable format // $DATETIME_FORMAT = \"%a %d %b %Y %H:%M:%S\" ; // Max size of small clusterimage // (250 pixels is same width as Ganglia's pie chart) // $SMALL_CLUSTERIMAGE_MAXWIDTH = 300 ; // The size of a single node in the small clusterimage // $SMALL_CLUSTERIMAGE_NODEWIDTH = 7 ; // Max size of small clusterimage // (250 pixels is same width as Ganglia's pie chart) // $BIG_CLUSTERIMAGE_MAXWIDTH = 500 ; // The size of a single node in the small clusterimage // $BIG_CLUSTERIMAGE_NODEWIDTH = 11 ; // Max size of small host image // $SMALL_HOSTIMAGE_MAXWIDTH = 450 ; // How to mark nodes with a job in clusterimage // $JOB_NODE_MARKING = \"J\" ; // How to mark nodes that are 'down' in the batch // $NODE_DOWN_MARKING = \"X\" ; // How to mark nodes that are 'offline' in the batch // $NODE_OFFLINE_MARKING = \".\" ; // Show empty columns in the ClusterImage? // $SHOW_EMPTY_COLUMN = false ; // Show empty rows in the ClusterImage? // $SHOW_EMPTY_ROW = true ; // XML Datasource for Job Monarch // by default localhost's gmetad // [syntax: <ip>:<port>] // $DATA_SOURCE = '127.0.0.1:8652' ; `\u8fd9\u91cc\u5199\u672c\u5730\u5730\u5740\u5373\u53ef` // Is there a jobarchive? // $JOB_ARCHIVE = true ; // Path to the job archive rrd files // $JOB_ARCHIVE_DIR = \"/user/local/jobmonarch\" ; `\u8fd9\u91cc\u5199\u4e0a\u4e00\u6b65\u4e2d\u8bbe\u7f6e\u7684rrd\u6570\u636e\u5b58\u653e\u7684\u8def\u5f84` // Location of the job archive database // [syntax: <ip>/<dbase>] // $JOB_ARCHIVE_DBASE = \"127.0.0.1/jobarchive\" ; `\u6570\u636e\u5e93\u5730\u5740\u548c\u6570\u636e\u5e93\u540d\u79f0` $JOB_ARCHIVE_SQL_USER = \"postgres\" ; `\u6570\u636e\u5e93\u7528\u6237\u540d` $JOB_ARCHIVE_SQL_PASSWORD = \"1qaz2WSX\" ; `\u6570\u636e\u5e93\u5bc6\u7801` // Include cluster specific settings here, // they will override any (global) settings above // on a per-cluster basis, where available. // //$CLUSTER_CONFS[\"Example Cluster\"] = \"./clusterconf/example.php\"; $CLUSTER_CONFS [ \"LISA Cluster\" ] = \"./clusterconf/lisa.php\" ; // ?> 1.6 \u90e8\u7f72PySlurm \u00b6 \u8bf4\u660e\uff1a\u5728slurm\u670d\u52a1\u7aef\u90e8\u7f72PySlurm(\u6839\u636e\u4e0d\u540cslurm\u7248\u672c\u90e8\u7f72\u5bf9\u5e94\u7684pyslurm)\u5b98\u7f51\u8bf4\u660e\u5982\u4e0b\uff1a https://github.com/PySlurm/pyslurm/tree/basvandervlies-20.11 # 1.\u5b89\u88c5Cython yum install Cython # 2.\u6839\u636e\u5b98\u65b9\u8bf4\u660e\u8fdb\u884c\u90e8\u7f72 # 3.\u68c0\u67e5\u6d4b\u8bd5(\u6709\u76f8\u5173\u7684json\u6570\u636e\u663e\u793a\u8868\u793a\u90e8\u7f72\u6210\u529f) cd examples ./node_list.py 1.7 \u90e8\u7f72\u914d\u7f6ejobmond \u00b6 # 1.\u5728slurm\u670d\u52a1\u7aef\u4e0b\u8f7d\u63d2\u4ef6\u6587\u4ef6\u5e76\u89e3\u538b wget http://ftp.surfsara.nl/pub/outgoing/jobmonarch/1.1.2/ganglia_jobmonarch-1.1.2.tar.gz tar xf ganglia_jobmonarch-1.1.2.tar.gz # 2.\u90e8\u7f72jobmond cd ganglia_jobmonarch-1.1.2 cp -a jobmond/jobmond.py /usr/local/sbin/jobmond.py cp -a jobmond/jobmond.conf /etc/jobmond.conf # 3.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6 vim /etc/jobmond.conf [ DEFAULT ] # Specify debugging level here; # # 10 = gemtric cmd's # DEBUG_LEVEL : 0 # Wether or not to run as a daemon in background # DAEMONIZE : 1 # What Batch type is the system # # Currently supported: pbs, slurm, sge (experimental), lsf (experimental) # BATCH_API : slurm ` \u76d1\u63a7\u7684\u8c03\u5ea6\u7cfb\u7edf\u7c7b\u578b ` # Which Batch server to monitor # BATCH_SERVER : localhost ` slurm\u670d\u52a1\u7aef\u5730\u5740 ` # Which queue(s) to report jobs of # (optional) # #QUEUE : long, short # How many seconds interval for polling of jobs # # this will effect directly how accurate the # end time of a job can be determined # BATCH_POLL_INTERVAL : 30 # Location of gmond.conf # # Default: /etc/gmond.conf ` \u8fd9\u91cc\u6ca1\u6709\u8bbe\u7f6e\uff0c\u4f1a\u9ed8\u8ba4\u5bfb\u627e/etc/gmond.conf ` # # DEPRECATED!: use GMETRIC_TARGET! # #GMOND_CONF : /etc/gmond.conf # # Location of gmetric binary # # Default: /usr/bin/gmetric # # DEPRECATED!: use GMETRIC_TARGET! # #GMETRIC_BINARY : /usr/bin/gmetric # Target of Gmetric's: where should we report to # (usually: your udp_send_channel from gmond) # # Syntax: <ip>:<port> # #GMETRIC_TARGET : 172.22.100.30:8649 ` \u8fd9\u91cc\u4e0d\u8bbe\u7f6e\uff0c\u4f1a\u81ea\u52a8\u83b7\u53d6gmond.conf\u4e2d\u4e0a\u62a5\u7ed9ganglia\u670d\u52a1\u7aef\u7684\u5730\u5740 ` # Enable logging to syslog? # USE_SYSLOG : 1 # What level msg'es should be logged to syslog? # # usually: lvl 0 (errors) # SYSLOG_LEVEL : 0 # Which facility to use in syslog # # Known: # KERN, USER, MAIL, DAEMON, AUTH, LPR, # NEWS, UUCP, CRON and LOCAL0 through LOCAL7 # SYSLOG_FACILITY : DAEMON # Wether or not to detect differences in # time from Torque server and local time. # # Ideally both machines (if not the same) # should have the same time (via ntp or whatever) # DETECT_TIME_DIFFS : 1 # Regexp style hostname translation # # Usefull if your Batch hostnames are not the same as your # Ganglia hostnames (different network interfaces) # # Syntax: /orig/new/, /orig/new/ # BATCH_HOST_TRANSLATE : # 4.\u542f\u52a8\u4f5c\u4e1a\u76d1\u63a7\u63d2\u4ef6 jobmond.py # \u6ce8\u610f\uff1a\u6b64\u65f6\u4f1a\u62a5\u9519\uff0c\u6839\u636e\u62a5\u9519\u7684\u884c\uff0c\u6709\u4e09\u5904\u9700\u8981\u4fee\u6539\uff0c\u7b2c\u4e00\u5904\u662f\u5c061374\u884c\u66f4\u6539\u4e3a\uff1astatus_long = self.getAttr( attrs, 'job_state' ) \uff1b\u540e\u9762\u4fe9\u5904\u6ce8\u91ca\u6389for\u5faa\u73af\u51e0\u884c\u4ee3\u7801 # \u4e4b\u540e\u518d\u542f\u52a8\u5373\u53ef # 5.\u68c0\u67e5\u63d2\u4ef6\u662f\u5426\u8fd0\u884c\u5728\u540e\u53f0 ps aux | grep jobmond 1.8 \u6700\u7ec8\u6d4b\u8bd5 \u00b6 \u6d4f\u89c8\u5668\u5f3a\u5237ganglia\u9875\u9762 \u7ed3\u8bed \u00b6 \u611f\u8c22\u60a8\u82b1\u8d39\u65f6\u95f4\u9605\u8bfb\u8fd9\u7bc7\u6559\u7a0b\uff0c\u5982\u679c\u559c\u6b22\u53ef\u4ee5\u5e2e\u5fd9\u8f6c\u53d1\u6216\u6536\u85cf\uff01\u795d\u60a8\u5728\u8fd9\u91cc\u8bb0\u5f55\u3001\u9605\u8bfb\u3001\u5206\u4eab\u6109\u5feb\uff01 \u4f5c\u8005 @cyrus0w 2022 \u5e74 2\u6708 16\u65e5","title":"ganglia\u76d1\u63a7slurm\u4f5c\u4e1a"},{"location":"Cyrus0w/%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97/%E7%9B%91%E6%8E%A7/ganglia/#gangliaslurm","text":"ganglia\u76d1\u63a7slurm\u4f5c\u4e1a \u524d\u8a00 \u4e00\u3001\u90e8\u7f72 1.1 \u63d2\u4ef6\u5de5\u4f5c\u539f\u7406\u8bf4\u660e 1.2 \u90e8\u7f72ganglia 1.3 \u90e8\u7f72postgresql\u6570\u636e\u5e93 1.4 \u90e8\u7f72\u914d\u7f6ejobarchived 1.5 \u8bbe\u7f6eganglia \u63d2\u4ef6web\u9875\u9762 1.6 \u90e8\u7f72PySlurm 1.7 \u90e8\u7f72\u914d\u7f6ejobmond 1.8 \u6700\u7ec8\u6d4b\u8bd5 \u7ed3\u8bed","title":"ganglia\u76d1\u63a7slurm\u4f5c\u4e1a"},{"location":"Cyrus0w/%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97/%E7%9B%91%E6%8E%A7/ganglia/#_1","text":"\u5b98\u65b9\u6559\u7a0b\uff1a https://oss.trac.surfsara.nl/jobmonarch \u6548\u679c\u56fe\uff1a \u96c6\u7fa4\u548c\u6240\u6709\u4f5c\u4e1a\u7684\u6982\u8ff0 \u96c6\u7fa4\u6982\u8ff0\uff0c\u4f5c\u4e1a\u8fc7\u6ee4\u6761\u4ef6\uff1a\u961f\u5217\u548c\u72b6\u6001 \u5de5\u4f5c\u89c6\u56fe","title":"\u524d\u8a00"},{"location":"Cyrus0w/%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97/%E7%9B%91%E6%8E%A7/ganglia/#_2","text":"","title":"\u4e00\u3001\u90e8\u7f72"},{"location":"Cyrus0w/%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97/%E7%9B%91%E6%8E%A7/ganglia/#11","text":"","title":"1.1 \u63d2\u4ef6\u5de5\u4f5c\u539f\u7406\u8bf4\u660e"},{"location":"Cyrus0w/%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97/%E7%9B%91%E6%8E%A7/ganglia/#12-ganglia","text":"\u8bf4\u660e\uff1a\u90e8\u7f72\u7565\uff0cganglia\u7248\u672cgmond >= v3.4.x \uff0cgmetad v3.4.x \uff0cGanglia web-2 frontend v3.5.x \uff0cGD v2.x , PHP v5.1 or higher \uff08with: postgres and GD support\uff09\u540c\u65f6\u6ce8\u610fserver\u7aef\u8fd8\u9700\u8981\u5148\u5b89\u88c5\u4ee5\u4e0b\u51e0\u4e2a\u57fa\u7840\u5305\uff1a yum install httpd php php-gd php-pgsql rrdtool perl-rrdtool rrdtool-devel rrdtool-python gd python-devel","title":"1.2 \u90e8\u7f72ganglia"},{"location":"Cyrus0w/%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97/%E7%9B%91%E6%8E%A7/ganglia/#13-postgresql","text":"# 1.\u5728ganglia server\u7aef\u90e8\u7f72\u6570\u636e\u5e93 yum install postgresql-server postgresql-devel postgresql # 2.\u521d\u59cb\u5316\u6570\u636e\u5e93 postgresql-setup initdb systemctl start postgresql # 3.\u8bbe\u7f6e\u5bc6\u7801 su - postgres psql \\p assword \\q exit # 4.\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u4ee5\u4fbf\u767b\u5f55\u6570\u636e\u5e93\u65f6\u5fc5\u987b\u4f7f\u7528\u5bc6\u7801 vim /var/lib/pgsql/data/pg_hba.conf \u5982\u56fe(\u6539\u4e3amd5): # 5.\u91cd\u542f systemctl restart postgresql # 6.\u5b89\u88c5psycopg2\uff08\u7528\u6765python\u8c03\u7528postgresql\u6570\u636e\u5e93\uff09 pip install psycopg2 # 7.\u4e0b\u8f7d\u63d2\u4ef6\u6587\u4ef6\u5e76\u89e3\u538b\uff0c\u83b7\u53d6\u6570\u636e\u5e93\u8868\u6587\u4ef6 wget http://ftp.surfsara.nl/pub/outgoing/jobmonarch/1.1.2/ganglia_jobmonarch-1.1.2.tar.gz tar xf ganglia_jobmonarch-1.1.2.tar.gz # 8.\u521b\u5efajobarchive\u6570\u636e\u5e93 su - postgres createdb jobarchive cd ganglia_jobmonarch-1.1.2 psql -f jobarchived/job_dbase.sql jobarchive # 9.\u67e5\u770b\u6570\u636e\u5e93 \\l","title":"1.3 \u90e8\u7f72postgresql\u6570\u636e\u5e93"},{"location":"Cyrus0w/%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97/%E7%9B%91%E6%8E%A7/ganglia/#14-jobarchived","text":"# 1.\u5728ganglia\u670d\u52a1\u7aef\u4e0b\u8f7d\u63d2\u4ef6\u6587\u4ef6\u5e76\u89e3\u538b(\u4e0a\u4e00\u6b65\u6570\u636e\u5e93\u5df2\u7ecf\u4e0b\u8f7d\u8fc7) wget http://ftp.surfsara.nl/pub/outgoing/jobmonarch/1.1.2/ganglia_jobmonarch-1.1.2.tar.gz tar xf ganglia_jobmonarch-1.1.2.tar.gz # 2.\u90e8\u7f72jobarchived cd ganglia_jobmonarch-1.1.2 cp jobarchived/jobarchived.conf /etc/jobarchived.conf cp jobarchived/jobarchived.py /usr/local/sbin/jobarchived.py # 3. \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6\uff08\u7eff\u8272\u8bf4\u660e\u5904\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\uff09 vim /etc/jobarchived.conf [ DEFAULT ] # Wether or not to run as a daemon in background # DAEMONIZE : 0 # Specify debugging level here (only when _not_ DAEMONIZE) # # 11 = XML: metrics # 10 = XML: host, cluster, grid, ganglia # 9 = RRD activity, gmetad config parsing # 8 = RRD file activity # 6 = SQL # 1 = daemon threading # 0 = errors # # default: 0 # DEBUG_LEVEL : 1 # Enable logging to syslog? # USE_SYSLOG : 1 # What level msg'es should be logged to syslog? # # usually: lvl 0 (errors) # SYSLOG_LEVEL : 0 # Which facility to use in syslog # # Known: # KERN, USER, MAIL, DAEMON, AUTH, LPR, # NEWS, UUCP, CRON and LOCAL0 through LOCAL7 # SYSLOG_FACILITY : DAEMON # Where is the gmetad.conf located # GMETAD_CONF : /etc/ganglia/gmetad.conf ` gmetad\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u4e00\u822c\u9ed8\u8ba4\u5728\u6b64\u8def\u5f84\u4e0b ` # Where to grab XML data from # Usually: local gmetad (port 8651) # # Syntax: <hostname>:<port> # ARCHIVE_XMLSOURCE : localhost:8651 ` ganglia\u670d\u52a1\u7aef\u5730\u5740\u548c\u7aef\u53e3\uff0c\u56e0\u4e3a\u5728\u672c\u673a\u4e2d\uff0c\u6240\u4ee5\u8fd9\u91cc\u76f4\u63a5\u5199localhost:8651 ` # List of data_source names to archive for # # Syntax: [ \"<clustername>\", \"<clustername>\" ] # ARCHIVE_DATASOURCES : [ \"OGSAAS\" ] ` ganglia\u4e2d\u8bbe\u7f6e\u7684\u96c6\u7fa4\u540d\u79f0 ` # Amount of hours to store in one single archived rrd # # If you would like less files you can set this bigger # but could degrade performance # # For now 12 hours seems to work: 2 periods per day # ARCHIVE_HOURS_PER_RRD : 12 # Which metrics to exclude from archiving # NOTE: This can be a regexp or a string # ARCHIVE_EXCLUDE_METRICS : \".*Temp.*\" , \".*RPM.*\" , \".*Version.*\" , \".*Tag $ \" , \"boottime\" , \"gexec\" , \"os.*\" , \"machine_type\" # Where to store the archived rrd's # #ARCHIVE_PATH : __JOBARCHIVE_RRDS__ ARCHIVE_PATH : /usr/local/jobmonarch ` \u81ea\u5b9a\u4e49rrd\u6570\u636e\u5e93\u6570\u636e\u5b58\u50a8\u76ee\u5f55\uff0c\u540e\u9762\u63d2\u4ef6\u7684web\u9875\u9762\u8981\u8c03\u7528 ` # Archive's SQL dbase to use # # Syntax: <hostname>/<database> # JOB_SQL_DBASE : localhost/jobarchive ` \u6570\u636e\u5e93\u5730\u5740\u548c\u6570\u636e\u5e93\u540d\u79f0 ` JOB_SQL_USER : postgres ` \u6570\u636e\u5e93\u7528\u6237\u540d ` JOB_SQL_PASSWORD : 1qaz2WSX ` \u6570\u636e\u5e93\u5bc6\u7801 ` # Timeout for jobs in archive # # Assume job has already finished while jobarchived was not running # after this amount of hours: the it will be finished anyway in the database # JOB_TIMEOUT : 168 # Location of rrdtool binary # RRDTOOL : /usr/bin/rrdtool # 4.\u542f\u52a8\u4f5c\u4e1a\u5f52\u6863\u63d2\u4ef6 jobarchived.py # 5.\u68c0\u67e5\u63d2\u4ef6\u662f\u5426\u8fd0\u884c\u5728\u540e\u53f0 ps aux | grep jobarchived","title":"1.4 \u90e8\u7f72\u914d\u7f6ejobarchived"},{"location":"Cyrus0w/%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97/%E7%9B%91%E6%8E%A7/ganglia/#15-ganglia-web","text":"# 1.\u5728\u524d\u9762\u4e0b\u8f7d\u89e3\u538b\u7684\u76ee\u5f55\u4e2d\uff0c\u5c06web\u6a21\u677f\u62f7\u8d1d\u5230ganglia\u9875\u9762\u7684\u6839\u76ee\u5f55\u4e2d cd ganglia_jobmonarch-1.1.2 cp -a web/templates/job_monarch /var/www/html/templates mkdir /var/www/html/addons cp -a web/addons/job_monarch /var/www/html/addons # 2.\u914d\u7f6eweb\u9875\u9762 vi /var/www/html/conf_default.php == > $conf [ 'template_name' ] = \"job_monarch\" ; vim /var/www/html/addons/job_monarch/conf.php <?php // Show hosts in a jobview by default? // $default_showhosts = true ; // Stop displaying archive search results after SEARCH_RESULT_LIMIT // $SEARCH_RESULT_LIMIT = 20 ; // Show the column job attribute 'requested memory'? // $COLUMN_REQUESTED_MEMORY = false ; // Show the column job attribute 'queued' (since)? // $COLUMN_QUEUED = true ; // Show the column job attribute 'nodes' hostnames? // $COLUMN_NODES = true ; // Path to Ganglia's web frontend root // // $GANGLIA_PATH = \"/data/ganglia-web-current/\"; $GANGLIA_PATH = \"/var/www/html\" ; `\u8fd9\u91cc\u5199ganglia\u9875\u9762\u7684\u6839\u76ee\u5f55` //$GANGLIA_PATH = \"../..\"; // Format of how to display a date and time in human readable format // $DATETIME_FORMAT = \"%a %d %b %Y %H:%M:%S\" ; // Max size of small clusterimage // (250 pixels is same width as Ganglia's pie chart) // $SMALL_CLUSTERIMAGE_MAXWIDTH = 300 ; // The size of a single node in the small clusterimage // $SMALL_CLUSTERIMAGE_NODEWIDTH = 7 ; // Max size of small clusterimage // (250 pixels is same width as Ganglia's pie chart) // $BIG_CLUSTERIMAGE_MAXWIDTH = 500 ; // The size of a single node in the small clusterimage // $BIG_CLUSTERIMAGE_NODEWIDTH = 11 ; // Max size of small host image // $SMALL_HOSTIMAGE_MAXWIDTH = 450 ; // How to mark nodes with a job in clusterimage // $JOB_NODE_MARKING = \"J\" ; // How to mark nodes that are 'down' in the batch // $NODE_DOWN_MARKING = \"X\" ; // How to mark nodes that are 'offline' in the batch // $NODE_OFFLINE_MARKING = \".\" ; // Show empty columns in the ClusterImage? // $SHOW_EMPTY_COLUMN = false ; // Show empty rows in the ClusterImage? // $SHOW_EMPTY_ROW = true ; // XML Datasource for Job Monarch // by default localhost's gmetad // [syntax: <ip>:<port>] // $DATA_SOURCE = '127.0.0.1:8652' ; `\u8fd9\u91cc\u5199\u672c\u5730\u5730\u5740\u5373\u53ef` // Is there a jobarchive? // $JOB_ARCHIVE = true ; // Path to the job archive rrd files // $JOB_ARCHIVE_DIR = \"/user/local/jobmonarch\" ; `\u8fd9\u91cc\u5199\u4e0a\u4e00\u6b65\u4e2d\u8bbe\u7f6e\u7684rrd\u6570\u636e\u5b58\u653e\u7684\u8def\u5f84` // Location of the job archive database // [syntax: <ip>/<dbase>] // $JOB_ARCHIVE_DBASE = \"127.0.0.1/jobarchive\" ; `\u6570\u636e\u5e93\u5730\u5740\u548c\u6570\u636e\u5e93\u540d\u79f0` $JOB_ARCHIVE_SQL_USER = \"postgres\" ; `\u6570\u636e\u5e93\u7528\u6237\u540d` $JOB_ARCHIVE_SQL_PASSWORD = \"1qaz2WSX\" ; `\u6570\u636e\u5e93\u5bc6\u7801` // Include cluster specific settings here, // they will override any (global) settings above // on a per-cluster basis, where available. // //$CLUSTER_CONFS[\"Example Cluster\"] = \"./clusterconf/example.php\"; $CLUSTER_CONFS [ \"LISA Cluster\" ] = \"./clusterconf/lisa.php\" ; // ?>","title":"1.5 \u8bbe\u7f6eganglia \u63d2\u4ef6web\u9875\u9762"},{"location":"Cyrus0w/%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97/%E7%9B%91%E6%8E%A7/ganglia/#16-pyslurm","text":"\u8bf4\u660e\uff1a\u5728slurm\u670d\u52a1\u7aef\u90e8\u7f72PySlurm(\u6839\u636e\u4e0d\u540cslurm\u7248\u672c\u90e8\u7f72\u5bf9\u5e94\u7684pyslurm)\u5b98\u7f51\u8bf4\u660e\u5982\u4e0b\uff1a https://github.com/PySlurm/pyslurm/tree/basvandervlies-20.11 # 1.\u5b89\u88c5Cython yum install Cython # 2.\u6839\u636e\u5b98\u65b9\u8bf4\u660e\u8fdb\u884c\u90e8\u7f72 # 3.\u68c0\u67e5\u6d4b\u8bd5(\u6709\u76f8\u5173\u7684json\u6570\u636e\u663e\u793a\u8868\u793a\u90e8\u7f72\u6210\u529f) cd examples ./node_list.py","title":"1.6 \u90e8\u7f72PySlurm"},{"location":"Cyrus0w/%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97/%E7%9B%91%E6%8E%A7/ganglia/#17-jobmond","text":"# 1.\u5728slurm\u670d\u52a1\u7aef\u4e0b\u8f7d\u63d2\u4ef6\u6587\u4ef6\u5e76\u89e3\u538b wget http://ftp.surfsara.nl/pub/outgoing/jobmonarch/1.1.2/ganglia_jobmonarch-1.1.2.tar.gz tar xf ganglia_jobmonarch-1.1.2.tar.gz # 2.\u90e8\u7f72jobmond cd ganglia_jobmonarch-1.1.2 cp -a jobmond/jobmond.py /usr/local/sbin/jobmond.py cp -a jobmond/jobmond.conf /etc/jobmond.conf # 3.\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6 vim /etc/jobmond.conf [ DEFAULT ] # Specify debugging level here; # # 10 = gemtric cmd's # DEBUG_LEVEL : 0 # Wether or not to run as a daemon in background # DAEMONIZE : 1 # What Batch type is the system # # Currently supported: pbs, slurm, sge (experimental), lsf (experimental) # BATCH_API : slurm ` \u76d1\u63a7\u7684\u8c03\u5ea6\u7cfb\u7edf\u7c7b\u578b ` # Which Batch server to monitor # BATCH_SERVER : localhost ` slurm\u670d\u52a1\u7aef\u5730\u5740 ` # Which queue(s) to report jobs of # (optional) # #QUEUE : long, short # How many seconds interval for polling of jobs # # this will effect directly how accurate the # end time of a job can be determined # BATCH_POLL_INTERVAL : 30 # Location of gmond.conf # # Default: /etc/gmond.conf ` \u8fd9\u91cc\u6ca1\u6709\u8bbe\u7f6e\uff0c\u4f1a\u9ed8\u8ba4\u5bfb\u627e/etc/gmond.conf ` # # DEPRECATED!: use GMETRIC_TARGET! # #GMOND_CONF : /etc/gmond.conf # # Location of gmetric binary # # Default: /usr/bin/gmetric # # DEPRECATED!: use GMETRIC_TARGET! # #GMETRIC_BINARY : /usr/bin/gmetric # Target of Gmetric's: where should we report to # (usually: your udp_send_channel from gmond) # # Syntax: <ip>:<port> # #GMETRIC_TARGET : 172.22.100.30:8649 ` \u8fd9\u91cc\u4e0d\u8bbe\u7f6e\uff0c\u4f1a\u81ea\u52a8\u83b7\u53d6gmond.conf\u4e2d\u4e0a\u62a5\u7ed9ganglia\u670d\u52a1\u7aef\u7684\u5730\u5740 ` # Enable logging to syslog? # USE_SYSLOG : 1 # What level msg'es should be logged to syslog? # # usually: lvl 0 (errors) # SYSLOG_LEVEL : 0 # Which facility to use in syslog # # Known: # KERN, USER, MAIL, DAEMON, AUTH, LPR, # NEWS, UUCP, CRON and LOCAL0 through LOCAL7 # SYSLOG_FACILITY : DAEMON # Wether or not to detect differences in # time from Torque server and local time. # # Ideally both machines (if not the same) # should have the same time (via ntp or whatever) # DETECT_TIME_DIFFS : 1 # Regexp style hostname translation # # Usefull if your Batch hostnames are not the same as your # Ganglia hostnames (different network interfaces) # # Syntax: /orig/new/, /orig/new/ # BATCH_HOST_TRANSLATE : # 4.\u542f\u52a8\u4f5c\u4e1a\u76d1\u63a7\u63d2\u4ef6 jobmond.py # \u6ce8\u610f\uff1a\u6b64\u65f6\u4f1a\u62a5\u9519\uff0c\u6839\u636e\u62a5\u9519\u7684\u884c\uff0c\u6709\u4e09\u5904\u9700\u8981\u4fee\u6539\uff0c\u7b2c\u4e00\u5904\u662f\u5c061374\u884c\u66f4\u6539\u4e3a\uff1astatus_long = self.getAttr( attrs, 'job_state' ) \uff1b\u540e\u9762\u4fe9\u5904\u6ce8\u91ca\u6389for\u5faa\u73af\u51e0\u884c\u4ee3\u7801 # \u4e4b\u540e\u518d\u542f\u52a8\u5373\u53ef # 5.\u68c0\u67e5\u63d2\u4ef6\u662f\u5426\u8fd0\u884c\u5728\u540e\u53f0 ps aux | grep jobmond","title":"1.7 \u90e8\u7f72\u914d\u7f6ejobmond"},{"location":"Cyrus0w/%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97/%E7%9B%91%E6%8E%A7/ganglia/#18","text":"\u6d4f\u89c8\u5668\u5f3a\u5237ganglia\u9875\u9762","title":"1.8 \u6700\u7ec8\u6d4b\u8bd5"},{"location":"Cyrus0w/%E9%AB%98%E6%80%A7%E8%83%BD%E8%AE%A1%E7%AE%97/%E7%9B%91%E6%8E%A7/ganglia/#_3","text":"\u611f\u8c22\u60a8\u82b1\u8d39\u65f6\u95f4\u9605\u8bfb\u8fd9\u7bc7\u6559\u7a0b\uff0c\u5982\u679c\u559c\u6b22\u53ef\u4ee5\u5e2e\u5fd9\u8f6c\u53d1\u6216\u6536\u85cf\uff01\u795d\u60a8\u5728\u8fd9\u91cc\u8bb0\u5f55\u3001\u9605\u8bfb\u3001\u5206\u4eab\u6109\u5feb\uff01 \u4f5c\u8005 @cyrus0w 2022 \u5e74 2\u6708 16\u65e5","title":"\u7ed3\u8bed"}]}